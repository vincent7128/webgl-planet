!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e=r();for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(this,function(){return function(t){function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var e={};return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=4)}([function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(t){r.ARRAY_TYPE=a=t},r.toRadian=function(t){return t*o},r.equals=function(t,r){return Math.abs(t-r)<=n*Math.max(1,Math.abs(t),Math.abs(r))};var n=r.EPSILON=1e-6,a=r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,o=(r.RANDOM=Math.random,Math.PI/180)},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=r[6],c=r[7],l=r[8],f=e[0],d=e[1],M=e[2],v=e[3],m=e[4],b=e[5],p=e[6],F=e[7],E=e[8];return t[0]=f*n+d*i+M*h,t[1]=f*a+d*u+M*c,t[2]=f*o+d*s+M*l,t[3]=v*n+m*i+b*h,t[4]=v*a+m*u+b*c,t[5]=v*o+m*s+b*l,t[6]=p*n+F*i+E*h,t[7]=p*a+F*u+E*c,t[8]=p*o+F*s+E*l,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t},r.clone=function(t){var r=new o.ARRAY_TYPE(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},r.fromValues=function(t,r,e,n,a,i,u,s,h){var c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=r,c[2]=e,c[3]=n,c[4]=a,c[5]=i,c[6]=u,c[7]=s,c[8]=h,c},r.set=function(t,r,e,n,a,o,i,u,s,h){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=h,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,r){if(t===r){var e=r[1],n=r[2],a=r[5];t[1]=r[3],t[2]=r[6],t[3]=e,t[5]=r[7],t[6]=n,t[7]=a}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],h=r[7],c=r[8],l=c*i-u*h,f=-c*o+u*s,d=h*o-i*s,M=e*l+n*f+a*d;return M?(M=1/M,t[0]=l*M,t[1]=(-c*n+a*h)*M,t[2]=(u*n-a*i)*M,t[3]=f*M,t[4]=(c*e-a*s)*M,t[5]=(-u*e+a*o)*M,t[6]=d*M,t[7]=(-h*e+n*s)*M,t[8]=(i*e-n*o)*M,t):null},r.adjoint=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],h=r[7],c=r[8];return t[0]=i*c-u*h,t[1]=a*h-n*c,t[2]=n*u-a*i,t[3]=u*s-o*c,t[4]=e*c-a*s,t[5]=a*o-e*u,t[6]=o*h-i*s,t[7]=n*s-e*h,t[8]=e*i-n*o,t},r.determinant=function(t){var r=t[0],e=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],h=t[8];return r*(h*o-i*s)+e*(-h*a+i*u)+n*(s*a-o*u)},r.multiply=n,r.translate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=r[6],c=r[7],l=r[8],f=e[0],d=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=f*n+d*i+h,t[7]=f*a+d*u+c,t[8]=f*o+d*s+l,t},r.rotate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=r[6],c=r[7],l=r[8],f=Math.sin(e),d=Math.cos(e);return t[0]=d*n+f*i,t[1]=d*a+f*u,t[2]=d*o+f*s,t[3]=d*i-f*n,t[4]=d*u-f*a,t[5]=d*s-f*o,t[6]=h,t[7]=c,t[8]=l,t},r.scale=function(t,r,e){var n=e[0],a=e[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=a*r[3],t[4]=a*r[4],t[5]=a*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t},r.fromRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=-e,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t},r.fromQuat=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e+e,u=n+n,s=a+a,h=e*i,c=n*i,l=n*u,f=a*i,d=a*u,M=a*s,v=o*i,m=o*u,b=o*s;return t[0]=1-l-M,t[3]=c-b,t[6]=f+m,t[1]=c+b,t[4]=1-h-M,t[7]=d-v,t[2]=f-m,t[5]=d+v,t[8]=1-h-l,t},r.normalFromMat4=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],h=r[7],c=r[8],l=r[9],f=r[10],d=r[11],M=r[12],v=r[13],m=r[14],b=r[15],p=e*u-n*i,F=e*s-a*i,E=e*h-o*i,A=n*s-a*u,g=n*h-o*u,y=a*h-o*s,R=c*v-l*M,x=c*m-f*M,w=c*b-d*M,P=l*m-f*v,_=l*b-d*v,D=f*b-d*m,T=p*D-F*_+E*P+A*w-g*x+y*R;return T?(T=1/T,t[0]=(u*D-s*_+h*P)*T,t[1]=(s*w-i*D-h*x)*T,t[2]=(i*_-u*w+h*R)*T,t[3]=(a*_-n*D-o*P)*T,t[4]=(e*D-a*w+o*x)*T,t[5]=(n*w-e*_-o*R)*T,t[6]=(v*y-m*g+b*A)*T,t[7]=(m*E-M*y-b*F)*T,t[8]=(M*g-v*E+b*p)*T,t):null},r.projection=function(t,r,e){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t},r.subtract=a,r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=t[4],s=t[5],h=t[6],c=t[7],l=t[8],f=r[0],d=r[1],M=r[2],v=r[3],m=r[4],b=r[5],p=r[6],F=r[7],E=r[8];return Math.abs(e-f)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-M)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-v)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-m)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(h-p)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(c-F)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(l-E)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(){var t=new M.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)}function o(t,r,e){var n=new M.ARRAY_TYPE(3);return n[0]=t,n[1]=r,n[2]=e,n}function i(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function u(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function s(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function h(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return Math.sqrt(e*e+n*n+a*a)}function c(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return e*e+n*n+a*a}function l(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function f(t,r){var e=r[0],n=r[1],a=r[2],o=e*e+n*n+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o),t}function d(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0,r.create=n,r.clone=function(t){var r=new M.ARRAY_TYPE(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},r.length=a,r.fromValues=o,r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},r.set=function(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},r.subtract=i,r.multiply=u,r.divide=s,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t},r.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t},r.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t},r.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t},r.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t},r.distance=h,r.squaredDistance=c,r.squaredLength=l,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t},r.normalize=f,r.dot=d,r.cross=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2];return t[0]=a*s-o*u,t[1]=o*i-n*s,t[2]=n*u-a*i,t},r.lerp=function(t,r,e,n){var a=r[0],o=r[1],i=r[2];return t[0]=a+n*(e[0]-a),t[1]=o+n*(e[1]-o),t[2]=i+n*(e[2]-i),t},r.hermite=function(t,r,e,n,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,h=i*(o-1),c=i*(3-2*o);return t[0]=r[0]*u+e[0]*s+n[0]*h+a[0]*c,t[1]=r[1]*u+e[1]*s+n[1]*h+a[1]*c,t[2]=r[2]*u+e[2]*s+n[2]*h+a[2]*c,t},r.bezier=function(t,r,e,n,a,o){var i=1-o,u=i*i,s=o*o,h=u*i,c=3*o*u,l=3*s*i,f=s*o;return t[0]=r[0]*h+e[0]*c+n[0]*l+a[0]*f,t[1]=r[1]*h+e[1]*c+n[1]*l+a[1]*f,t[2]=r[2]*h+e[2]*c+n[2]*l+a[2]*f,t},r.random=function(t,r){r=r||1;var e=2*M.RANDOM()*Math.PI,n=2*M.RANDOM()-1,a=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=n*r,t},r.transformMat4=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[3]*n+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*n+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*n+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*n+e[6]*a+e[10]*o+e[14])/i,t},r.transformMat3=function(t,r,e){var n=r[0],a=r[1],o=r[2];return t[0]=n*e[0]+a*e[3]+o*e[6],t[1]=n*e[1]+a*e[4]+o*e[7],t[2]=n*e[2]+a*e[5]+o*e[8],t},r.transformQuat=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2],h=e[3],c=h*n+u*o-s*a,l=h*a+s*n-i*o,f=h*o+i*a-u*n,d=-i*n-u*a-s*o;return t[0]=c*h+d*-i+l*-s-f*-u,t[1]=l*h+d*-u+f*-i-c*-s,t[2]=f*h+d*-s+c*-u-l*-i,t},r.rotateX=function(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.rotateY=function(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.rotateZ=function(t,r,e,n){var a=[],o=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.angle=function(t,r){var e=o(t[0],t[1],t[2]),n=o(r[0],r[1],r[2]);f(e,e),f(n,n);var a=d(e,n);return a>1?0:a<-1?Math.PI:Math.acos(a)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],o=r[0],i=r[1],u=r[2];return Math.abs(e-o)<=M.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-i)<=M.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=M.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var M=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.sub=i,r.mul=u,r.div=s,r.dist=h,r.sqrDist=c,r.len=a,r.sqrLen=l,r.forEach=function(){var t=n();return function(r,e,n,a,o,i){var u=void 0,s=void 0;for(e||(e=3),n||(n=0),s=a?Math.min(a*e+n,r.length):r.length,u=n;u<s;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],o(t,t,i),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}()},function(t,r,e){"use strict";function n(){var t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function o(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function i(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function u(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function s(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],o=r[3]-t[3];return Math.sqrt(e*e+n*n+a*a+o*o)}function h(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],o=r[3]-t[3];return e*e+n*n+a*a+o*o}function c(t){var r=t[0],e=t[1],n=t[2],a=t[3];return Math.sqrt(r*r+e*e+n*n+a*a)}function l(t){var r=t[0],e=t[1],n=t[2],a=t[3];return r*r+e*e+n*n+a*a}function f(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e*e+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=n*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0,r.create=n,r.clone=function(t){var r=new d.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.fromValues=function(t,r,e,n){var a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=r,a[2]=e,a[3]=n,a},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},r.set=function(t,r,e,n,a){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t},r.subtract=a,r.multiply=o,r.divide=i,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t},r.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t},r.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t},r.scale=u,r.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t},r.distance=s,r.squaredDistance=h,r.length=c,r.squaredLength=l,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t},r.normalize=f,r.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},r.lerp=function(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=r[3];return t[0]=a+n*(e[0]-a),t[1]=o+n*(e[1]-o),t[2]=i+n*(e[2]-i),t[3]=u+n*(e[3]-u),t},r.random=function(t,r){return r=r||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),f(t,t),u(t,t,r),t},r.transformMat4=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3];return t[0]=e[0]*n+e[4]*a+e[8]*o+e[12]*i,t[1]=e[1]*n+e[5]*a+e[9]*o+e[13]*i,t[2]=e[2]*n+e[6]*a+e[10]*o+e[14]*i,t[3]=e[3]*n+e[7]*a+e[11]*o+e[15]*i,t},r.transformQuat=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=e[0],u=e[1],s=e[2],h=e[3],c=h*n+u*o-s*a,l=h*a+s*n-i*o,f=h*o+i*a-u*n,d=-i*n-u*a-s*o;return t[0]=c*h+d*-i+l*-s-f*-u,t[1]=l*h+d*-u+f*-i-c*-s,t[2]=f*h+d*-s+c*-u-l*-i,t[3]=r[3],t},r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],o=t[3],i=r[0],u=r[1],s=r[2],h=r[3];return Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(n-u)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-h)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))};var d=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.sub=a,r.mul=o,r.div=i,r.dist=s,r.sqrDist=h,r.len=c,r.sqrLen=l,r.forEach=function(){var t=n();return function(r,e,n,a,o,i){var u=void 0,s=void 0;for(e||(e=4),n||(n=0),s=a?Math.min(a*e+n,r.length):r.length,u=n;u<s;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],o(t,t,i),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}()},function(t,r,e){"use strict";function n(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0;var a=n(e(0)),o=n(e(5)),i=n(e(6)),u=n(e(1)),s=n(e(7)),h=n(e(8)),c=n(e(9)),l=n(e(2)),f=n(e(3));r.glMatrix=a,r.mat2=o,r.mat2d=i,r.mat3=u,r.mat4=s,r.quat=h,r.vec2=c,r.vec3=l,r.vec4=f},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],s=e[1],h=e[2],c=e[3];return t[0]=n*u+o*s,t[1]=a*u+i*s,t[2]=n*h+o*c,t[3]=a*h+i*c,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var r=new o.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,r,e,n){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=r,a[2]=e,a[3]=n,a},r.set=function(t,r,e,n,a){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t},r.transpose=function(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e*o-a*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-a*i,t[3]=e*i,t):null},r.adjoint=function(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=n,r.rotate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s+o*u,t[1]=a*s+i*u,t[2]=n*-u+o*s,t[3]=a*-u+i*s,t},r.scale=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],s=e[1];return t[0]=n*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},r.fromRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t},r.subtract=a,r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=r[0],s=r[1],h=r[2],c=r[3];return Math.abs(e-u)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=e[0],c=e[1],l=e[2],f=e[3],d=e[4],M=e[5];return t[0]=n*h+o*c,t[1]=a*h+i*c,t[2]=n*l+o*f,t[3]=a*l+i*f,t[4]=n*d+o*M+u,t[5]=a*d+i*M+s,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var r=new o.ARRAY_TYPE(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,r,e,n,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=r,u[2]=e,u[3]=n,u[4]=a,u[5]=i,u},r.set=function(t,r,e,n,a,o,i){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=e*o-n*a;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-a*s,t[3]=e*s,t[4]=(a*u-o*i)*s,t[5]=(n*i-e*u)*s,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=n,r.rotate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=Math.sin(e),c=Math.cos(e);return t[0]=n*c+o*h,t[1]=a*c+i*h,t[2]=n*-h+o*c,t[3]=a*-h+i*c,t[4]=u,t[5]=s,t},r.scale=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=e[0],c=e[1];return t[0]=n*h,t[1]=a*h,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=s,t},r.translate=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=e[0],c=e[1];return t[0]=n,t[1]=a,t[2]=o,t[3]=i,t[4]=n*h+o*c+u,t[5]=a*h+i*c+s,t},r.fromRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t},r.subtract=a,r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=t[4],s=t[5],h=r[0],c=r[1],l=r[2],f=r[3],d=r[4],M=r[5];return Math.abs(e-h)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-l)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-M)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(M))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],h=r[6],c=r[7],l=r[8],f=r[9],d=r[10],M=r[11],v=r[12],m=r[13],b=r[14],p=r[15],F=e[0],E=e[1],A=e[2],g=e[3];return t[0]=F*n+E*u+A*l+g*v,t[1]=F*a+E*s+A*f+g*m,t[2]=F*o+E*h+A*d+g*b,t[3]=F*i+E*c+A*M+g*p,F=e[4],E=e[5],A=e[6],g=e[7],t[4]=F*n+E*u+A*l+g*v,t[5]=F*a+E*s+A*f+g*m,t[6]=F*o+E*h+A*d+g*b,t[7]=F*i+E*c+A*M+g*p,F=e[8],E=e[9],A=e[10],g=e[11],t[8]=F*n+E*u+A*l+g*v,t[9]=F*a+E*s+A*f+g*m,t[10]=F*o+E*h+A*d+g*b,t[11]=F*i+E*c+A*M+g*p,F=e[12],E=e[13],A=e[14],g=e[15],t[12]=F*n+E*u+A*l+g*v,t[13]=F*a+E*s+A*f+g*m,t[14]=F*o+E*h+A*d+g*b,t[15]=F*i+E*c+A*M+g*p,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t[9]=r[9]-e[9],t[10]=r[10]-e[10],t[11]=r[11]-e[11],t[12]=r[12]-e[12],t[13]=r[13]-e[13],t[14]=r[14]-e[14],t[15]=r[15]-e[15],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var r=new o.ARRAY_TYPE(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},r.fromValues=function(t,r,e,n,a,i,u,s,h,c,l,f,d,M,v,m){var b=new o.ARRAY_TYPE(16);return b[0]=t,b[1]=r,b[2]=e,b[3]=n,b[4]=a,b[5]=i,b[6]=u,b[7]=s,b[8]=h,b[9]=c,b[10]=l,b[11]=f,b[12]=d,b[13]=M,b[14]=v,b[15]=m,b},r.set=function(t,r,e,n,a,o,i,u,s,h,c,l,f,d,M,v,m){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=h,t[9]=c,t[10]=l,t[11]=f,t[12]=d,t[13]=M,t[14]=v,t[15]=m,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.transpose=function(t,r){if(t===r){var e=r[1],n=r[2],a=r[3],o=r[6],i=r[7],u=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=o,t[11]=r[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t},r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],h=r[7],c=r[8],l=r[9],f=r[10],d=r[11],M=r[12],v=r[13],m=r[14],b=r[15],p=e*u-n*i,F=e*s-a*i,E=e*h-o*i,A=n*s-a*u,g=n*h-o*u,y=a*h-o*s,R=c*v-l*M,x=c*m-f*M,w=c*b-d*M,P=l*m-f*v,_=l*b-d*v,D=f*b-d*m,T=p*D-F*_+E*P+A*w-g*x+y*R;return T?(T=1/T,t[0]=(u*D-s*_+h*P)*T,t[1]=(a*_-n*D-o*P)*T,t[2]=(v*y-m*g+b*A)*T,t[3]=(f*g-l*y-d*A)*T,t[4]=(s*w-i*D-h*x)*T,t[5]=(e*D-a*w+o*x)*T,t[6]=(m*E-M*y-b*F)*T,t[7]=(c*y-f*E+d*F)*T,t[8]=(i*_-u*w+h*R)*T,t[9]=(n*w-e*_-o*R)*T,t[10]=(M*g-v*E+b*p)*T,t[11]=(l*E-c*g-d*p)*T,t[12]=(u*x-i*P-s*R)*T,t[13]=(e*P-n*x+a*R)*T,t[14]=(v*F-M*A-m*p)*T,t[15]=(c*A-l*F+f*p)*T,t):null},r.adjoint=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],h=r[7],c=r[8],l=r[9],f=r[10],d=r[11],M=r[12],v=r[13],m=r[14],b=r[15];return t[0]=u*(f*b-d*m)-l*(s*b-h*m)+v*(s*d-h*f),t[1]=-(n*(f*b-d*m)-l*(a*b-o*m)+v*(a*d-o*f)),t[2]=n*(s*b-h*m)-u*(a*b-o*m)+v*(a*h-o*s),t[3]=-(n*(s*d-h*f)-u*(a*d-o*f)+l*(a*h-o*s)),t[4]=-(i*(f*b-d*m)-c*(s*b-h*m)+M*(s*d-h*f)),t[5]=e*(f*b-d*m)-c*(a*b-o*m)+M*(a*d-o*f),t[6]=-(e*(s*b-h*m)-i*(a*b-o*m)+M*(a*h-o*s)),t[7]=e*(s*d-h*f)-i*(a*d-o*f)+c*(a*h-o*s),t[8]=i*(l*b-d*v)-c*(u*b-h*v)+M*(u*d-h*l),t[9]=-(e*(l*b-d*v)-c*(n*b-o*v)+M*(n*d-o*l)),t[10]=e*(u*b-h*v)-i*(n*b-o*v)+M*(n*h-o*u),t[11]=-(e*(u*d-h*l)-i*(n*d-o*l)+c*(n*h-o*u)),t[12]=-(i*(l*m-f*v)-c*(u*m-s*v)+M*(u*f-s*l)),t[13]=e*(l*m-f*v)-c*(n*m-a*v)+M*(n*f-a*l),t[14]=-(e*(u*m-s*v)-i*(n*m-a*v)+M*(n*s-a*u)),t[15]=e*(u*f-s*l)-i*(n*f-a*l)+c*(n*s-a*u),t},r.determinant=function(t){var r=t[0],e=t[1],n=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],h=t[8],c=t[9],l=t[10],f=t[11],d=t[12],M=t[13],v=t[14],m=t[15];return(r*i-e*o)*(l*m-f*v)-(r*u-n*o)*(c*m-f*M)+(r*s-a*o)*(c*v-l*M)+(e*u-n*i)*(h*m-f*d)-(e*s-a*i)*(h*v-l*d)+(n*s-a*u)*(h*M-c*d)},r.multiply=n,r.translate=function(t,r,e){var n=e[0],a=e[1],o=e[2],i=void 0,u=void 0,s=void 0,h=void 0,c=void 0,l=void 0,f=void 0,d=void 0,M=void 0,v=void 0,m=void 0,b=void 0;return r===t?(t[12]=r[0]*n+r[4]*a+r[8]*o+r[12],t[13]=r[1]*n+r[5]*a+r[9]*o+r[13],t[14]=r[2]*n+r[6]*a+r[10]*o+r[14],t[15]=r[3]*n+r[7]*a+r[11]*o+r[15]):(i=r[0],u=r[1],s=r[2],h=r[3],c=r[4],l=r[5],f=r[6],d=r[7],M=r[8],v=r[9],m=r[10],b=r[11],t[0]=i,t[1]=u,t[2]=s,t[3]=h,t[4]=c,t[5]=l,t[6]=f,t[7]=d,t[8]=M,t[9]=v,t[10]=m,t[11]=b,t[12]=i*n+c*a+M*o+r[12],t[13]=u*n+l*a+v*o+r[13],t[14]=s*n+f*a+m*o+r[14],t[15]=h*n+d*a+b*o+r[15]),t},r.scale=function(t,r,e){var n=e[0],a=e[1],o=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=r[11]*o,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},r.rotate=function(t,r,e,n){var a=n[0],i=n[1],u=n[2],s=Math.sqrt(a*a+i*i+u*u),h=void 0,c=void 0,l=void 0,f=void 0,d=void 0,M=void 0,v=void 0,m=void 0,b=void 0,p=void 0,F=void 0,E=void 0,A=void 0,g=void 0,y=void 0,R=void 0,x=void 0,w=void 0,P=void 0,_=void 0,D=void 0,T=void 0,L=void 0,S=void 0;return Math.abs(s)<o.EPSILON?null:(s=1/s,a*=s,i*=s,u*=s,h=Math.sin(e),c=Math.cos(e),l=1-c,f=r[0],d=r[1],M=r[2],v=r[3],m=r[4],b=r[5],p=r[6],F=r[7],E=r[8],A=r[9],g=r[10],y=r[11],R=a*a*l+c,x=i*a*l+u*h,w=u*a*l-i*h,P=a*i*l-u*h,_=i*i*l+c,D=u*i*l+a*h,T=a*u*l+i*h,L=i*u*l-a*h,S=u*u*l+c,t[0]=f*R+m*x+E*w,t[1]=d*R+b*x+A*w,t[2]=M*R+p*x+g*w,t[3]=v*R+F*x+y*w,t[4]=f*P+m*_+E*D,t[5]=d*P+b*_+A*D,t[6]=M*P+p*_+g*D,t[7]=v*P+F*_+y*D,t[8]=f*T+m*L+E*S,t[9]=d*T+b*L+A*S,t[10]=M*T+p*L+g*S,t[11]=v*T+F*L+y*S,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},r.rotateX=function(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[4],i=r[5],u=r[6],s=r[7],h=r[8],c=r[9],l=r[10],f=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=o*a+h*n,t[5]=i*a+c*n,t[6]=u*a+l*n,t[7]=s*a+f*n,t[8]=h*a-o*n,t[9]=c*a-i*n,t[10]=l*a-u*n,t[11]=f*a-s*n,t},r.rotateY=function(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[0],i=r[1],u=r[2],s=r[3],h=r[8],c=r[9],l=r[10],f=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a-h*n,t[1]=i*a-c*n,t[2]=u*a-l*n,t[3]=s*a-f*n,t[8]=o*n+h*a,t[9]=i*n+c*a,t[10]=u*n+l*a,t[11]=s*n+f*a,t},r.rotateZ=function(t,r,e){var n=Math.sin(e),a=Math.cos(e),o=r[0],i=r[1],u=r[2],s=r[3],h=r[4],c=r[5],l=r[6],f=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a+h*n,t[1]=i*a+c*n,t[2]=u*a+l*n,t[3]=s*a+f*n,t[4]=h*a-o*n,t[5]=c*a-i*n,t[6]=l*a-u*n,t[7]=f*a-s*n,t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,r,e){var n=e[0],a=e[1],i=e[2],u=Math.sqrt(n*n+a*a+i*i),s=void 0,h=void 0,c=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,n*=u,a*=u,i*=u,s=Math.sin(r),h=Math.cos(r),c=1-h,t[0]=n*n*c+h,t[1]=a*n*c+i*s,t[2]=i*n*c-a*s,t[3]=0,t[4]=n*a*c-i*s,t[5]=a*a*c+h,t[6]=i*a*c+n*s,t[7]=0,t[8]=n*i*c+a*s,t[9]=a*i*c-n*s,t[10]=i*i*c+h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=n+n,s=a+a,h=o+o,c=n*u,l=n*s,f=n*h,d=a*s,M=a*h,v=o*h,m=i*u,b=i*s,p=i*h;return t[0]=1-(d+v),t[1]=l+p,t[2]=f-b,t[3]=0,t[4]=l-p,t[5]=1-(c+v),t[6]=M+m,t[7]=0,t[8]=f+b,t[9]=M-m,t[10]=1-(c+d),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.getTranslation=function(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t},r.getScaling=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[4],i=r[5],u=r[6],s=r[8],h=r[9],c=r[10];return t[0]=Math.sqrt(e*e+n*n+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+h*h+c*c),t},r.getRotation=function(t,r){var e=r[0]+r[5]+r[10],n=0;return e>0?(n=2*Math.sqrt(e+1),t[3]=.25*n,t[0]=(r[6]-r[9])/n,t[1]=(r[8]-r[2])/n,t[2]=(r[1]-r[4])/n):r[0]>r[5]&r[0]>r[10]?(n=2*Math.sqrt(1+r[0]-r[5]-r[10]),t[3]=(r[6]-r[9])/n,t[0]=.25*n,t[1]=(r[1]+r[4])/n,t[2]=(r[8]+r[2])/n):r[5]>r[10]?(n=2*Math.sqrt(1+r[5]-r[0]-r[10]),t[3]=(r[8]-r[2])/n,t[0]=(r[1]+r[4])/n,t[1]=.25*n,t[2]=(r[6]+r[9])/n):(n=2*Math.sqrt(1+r[10]-r[0]-r[5]),t[3]=(r[1]-r[4])/n,t[0]=(r[8]+r[2])/n,t[1]=(r[6]+r[9])/n,t[2]=.25*n),t},r.fromRotationTranslationScale=function(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=r[3],s=a+a,h=o+o,c=i+i,l=a*s,f=a*h,d=a*c,M=o*h,v=o*c,m=i*c,b=u*s,p=u*h,F=u*c,E=n[0],A=n[1],g=n[2];return t[0]=(1-(M+m))*E,t[1]=(f+F)*E,t[2]=(d-p)*E,t[3]=0,t[4]=(f-F)*A,t[5]=(1-(l+m))*A,t[6]=(v+b)*A,t[7]=0,t[8]=(d+p)*g,t[9]=(v-b)*g,t[10]=(1-(l+M))*g,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,r,e,n,a){var o=r[0],i=r[1],u=r[2],s=r[3],h=o+o,c=i+i,l=u+u,f=o*h,d=o*c,M=o*l,v=i*c,m=i*l,b=u*l,p=s*h,F=s*c,E=s*l,A=n[0],g=n[1],y=n[2],R=a[0],x=a[1],w=a[2];return t[0]=(1-(v+b))*A,t[1]=(d+E)*A,t[2]=(M-F)*A,t[3]=0,t[4]=(d-E)*g,t[5]=(1-(f+b))*g,t[6]=(m+p)*g,t[7]=0,t[8]=(M+F)*y,t[9]=(m-p)*y,t[10]=(1-(f+v))*y,t[11]=0,t[12]=e[0]+R-(t[0]*R+t[4]*x+t[8]*w),t[13]=e[1]+x-(t[1]*R+t[5]*x+t[9]*w),t[14]=e[2]+w-(t[2]*R+t[6]*x+t[10]*w),t[15]=1,t},r.fromQuat=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e+e,u=n+n,s=a+a,h=e*i,c=n*i,l=n*u,f=a*i,d=a*u,M=a*s,v=o*i,m=o*u,b=o*s;return t[0]=1-l-M,t[1]=c+b,t[2]=f-m,t[3]=0,t[4]=c-b,t[5]=1-h-M,t[6]=d+v,t[7]=0,t[8]=f+m,t[9]=d-v,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,r,e,n,a,o,i){var u=1/(e-r),s=1/(a-n),h=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+r)*u,t[9]=(a+n)*s,t[10]=(i+o)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*h,t[15]=0,t},r.perspective=function(t,r,e,n,a){var o=1/Math.tan(r/2),i=1/(n-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*i,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,r,e,n){var a=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),i=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),s=2/(i+u),h=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*h*.5,t[10]=n/(e-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*e/(e-n),t[15]=0,t},r.ortho=function(t,r,e,n,a,o,i){var u=1/(r-e),s=1/(n-a),h=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(r+e)*u,t[13]=(a+n)*s,t[14]=(i+o)*h,t[15]=1,t},r.lookAt=function(t,r,e,n){var a=void 0,i=void 0,u=void 0,s=void 0,h=void 0,c=void 0,l=void 0,f=void 0,d=void 0,M=void 0,v=r[0],m=r[1],b=r[2],p=n[0],F=n[1],E=n[2],A=e[0],g=e[1],y=e[2];return Math.abs(v-A)<o.EPSILON&&Math.abs(m-g)<o.EPSILON&&Math.abs(b-y)<o.EPSILON?mat4.identity(t):(l=v-A,f=m-g,d=b-y,M=1/Math.sqrt(l*l+f*f+d*d),l*=M,f*=M,d*=M,a=F*d-E*f,i=E*l-p*d,u=p*f-F*l,(M=Math.sqrt(a*a+i*i+u*u))?(a*=M=1/M,i*=M,u*=M):(a=0,i=0,u=0),s=f*u-d*i,h=d*a-l*u,c=l*i-f*a,(M=Math.sqrt(s*s+h*h+c*c))?(s*=M=1/M,h*=M,c*=M):(s=0,h=0,c=0),t[0]=a,t[1]=s,t[2]=l,t[3]=0,t[4]=i,t[5]=h,t[6]=f,t[7]=0,t[8]=u,t[9]=c,t[10]=d,t[11]=0,t[12]=-(a*v+i*m+u*b),t[13]=-(s*v+h*m+c*b),t[14]=-(l*v+f*m+d*b),t[15]=1,t)},r.targetTo=function(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=n[0],s=n[1],h=n[2],c=a-e[0],l=o-e[1],f=i-e[2],d=c*c+l*l+f*f;d>0&&(c*=d=1/Math.sqrt(d),l*=d,f*=d);var M=s*f-h*l,v=h*c-u*f,m=u*l-s*c;return t[0]=M,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-f*v,t[5]=f*M-c*m,t[6]=c*v-l*M,t[7]=0,t[8]=c,t[9]=l,t[10]=f,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t[9]=r[9]+e[9],t[10]=r[10]+e[10],t[11]=r[11]+e[11],t[12]=r[12]+e[12],t[13]=r[13]+e[13],t[14]=r[14]+e[14],t[15]=r[15]+e[15],t},r.subtract=a,r.multiplyScalar=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t[9]=r[9]*e,t[10]=r[10]*e,t[11]=r[11]*e,t[12]=r[12]*e,t[13]=r[13]*e,t[14]=r[14]*e,t[15]=r[15]*e,t},r.multiplyScalarAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t[9]=r[9]+e[9]*n,t[10]=r[10]+e[10]*n,t[11]=r[11]+e[11]*n,t[12]=r[12]+e[12]*n,t[13]=r[13]+e[13]*n,t[14]=r[14]+e[14]*n,t[15]=r[15]+e[15]*n,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]},r.equals=function(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],u=t[4],s=t[5],h=t[6],c=t[7],l=t[8],f=t[9],d=t[10],M=t[11],v=t[12],m=t[13],b=t[14],p=t[15],F=r[0],E=r[1],A=r[2],g=r[3],y=r[4],R=r[5],x=r[6],w=r[7],P=r[8],_=r[9],D=r[10],T=r[11],L=r[12],S=r[13],I=r[14],O=r[15];return Math.abs(e-F)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(F))&&Math.abs(n-E)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(a-A)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(i-g)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(u-y)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-R)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(h-x)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(c-w)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(l-P)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(f-_)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(d-D)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(M-T)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(v-L)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(m-S)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(b-I)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(p-O)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(O))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.mul=n,r.sub=a},function(t,r,e){"use strict";function n(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}function a(){var t=new h.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,r,e){e*=.5;var n=Math.sin(e);return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=Math.cos(e),t}function i(t,r,e){var n=r[0],a=r[1],o=r[2],i=r[3],u=e[0],s=e[1],h=e[2],c=e[3];return t[0]=n*c+i*u+a*h-o*s,t[1]=a*c+i*s+o*u-n*h,t[2]=o*c+i*h+n*s-a*u,t[3]=i*c-n*u-a*s-o*h,t}function u(t,r,e,n){var a=r[0],o=r[1],i=r[2],u=r[3],s=e[0],h=e[1],c=e[2],l=e[3],f=void 0,d=void 0,M=void 0,v=void 0,m=void 0;return(d=a*s+o*h+i*c+u*l)<0&&(d=-d,s=-s,h=-h,c=-c,l=-l),1-d>1e-6?(f=Math.acos(d),M=Math.sin(f),v=Math.sin((1-n)*f)/M,m=Math.sin(n*f)/M):(v=1-n,m=n),t[0]=v*a+m*s,t[1]=v*o+m*h,t[2]=v*i+m*c,t[3]=v*u+m*l,t}function s(t,r){var e=r[0]+r[4]+r[8],n=void 0;if(e>0)n=Math.sqrt(e+1),t[3]=.5*n,n=.5/n,t[0]=(r[5]-r[7])*n,t[1]=(r[6]-r[2])*n,t[2]=(r[1]-r[3])*n;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(r[3*a+a]-r[3*o+o]-r[3*i+i]+1),t[a]=.5*n,n=.5/n,t[3]=(r[3*o+i]-r[3*i+o])*n,t[o]=(r[3*o+a]+r[3*a+o])*n,t[i]=(r[3*i+a]+r[3*a+i])*n}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0,r.create=a,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},r.setAxisAngle=o,r.getAxisAngle=function(t,r){var e=2*Math.acos(r[3]),n=Math.sin(e/2);return 0!=n?(t[0]=r[0]/n,t[1]=r[1]/n,t[2]=r[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},r.multiply=i,r.rotateX=function(t,r,e){e*=.5;var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-n*u,t},r.rotateY=function(t,r,e){e*=.5;var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s-o*u,t[1]=a*s+i*u,t[2]=o*s+n*u,t[3]=i*s-a*u,t},r.rotateZ=function(t,r,e){e*=.5;var n=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(e),s=Math.cos(e);return t[0]=n*s+a*u,t[1]=a*s-n*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},r.calculateW=function(t,r){var e=r[0],n=r[1],a=r[2];return t[0]=e,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-n*n-a*a)),t},r.slerp=u,r.invert=function(t,r){var e=r[0],n=r[1],a=r[2],o=r[3],i=e*e+n*n+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-n*u,t[2]=-a*u,t[3]=o*u,t},r.conjugate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t},r.fromMat3=s,r.fromEuler=function(t,r,e,n){var a=.5*Math.PI/180;r*=a,e*=a,n*=a;var o=Math.sin(r),i=Math.cos(r),u=Math.sin(e),s=Math.cos(e),h=Math.sin(n),c=Math.cos(n);return t[0]=o*s*c-i*u*h,t[1]=i*u*c+o*s*h,t[2]=i*s*h-o*u*c,t[3]=i*s*c+o*u*h,t},r.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var h=n(e(0)),c=n(e(1)),l=n(e(2)),f=n(e(3)),d=(r.clone=f.clone,r.fromValues=f.fromValues,r.copy=f.copy,r.set=f.set,r.add=f.add,r.mul=i,r.scale=f.scale,r.dot=f.dot,r.lerp=f.lerp,r.length=f.length),M=(r.len=d,r.squaredLength=f.squaredLength),v=(r.sqrLen=M,r.normalize=f.normalize);r.exactEquals=f.exactEquals,r.equals=f.equals,r.rotationTo=function(){var t=l.create(),r=l.fromValues(1,0,0),e=l.fromValues(0,1,0);return function(n,a,i){var u=l.dot(a,i);return u<-.999999?(l.cross(t,r,a),l.len(t)<1e-6&&l.cross(t,e,a),l.normalize(t,t),o(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(l.cross(t,a,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,v(n,n))}}(),r.sqlerp=function(){var t=a(),r=a();return function(e,n,a,o,i,s){return u(t,n,i,s),u(r,a,o,s),u(e,t,r,2*s*(1-s)),e}}(),r.setAxes=function(){var t=c.create();return function(r,e,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],v(r,s(r,t))}}()},function(t,r,e){"use strict";function n(){var t=new l.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function o(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function i(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function u(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.sqrt(e*e+n*n)}function s(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function h(t){var r=t[0],e=t[1];return Math.sqrt(r*r+e*e)}function c(t){var r=t[0],e=t[1];return r*r+e*e}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0,r.create=n,r.clone=function(t){var r=new l.ARRAY_TYPE(2);return r[0]=t[0],r[1]=t[1],r},r.fromValues=function(t,r){var e=new l.ARRAY_TYPE(2);return e[0]=t,e[1]=r,e},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t},r.set=function(t,r,e){return t[0]=r,t[1]=e,t},r.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t},r.subtract=a,r.multiply=o,r.divide=i,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t},r.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t},r.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t},r.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t},r.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t},r.distance=u,r.squaredDistance=s,r.length=h,r.squaredLength=c,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t},r.normalize=function(t,r){var e=r[0],n=r[1],a=e*e+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=r[0]*a,t[1]=r[1]*a),t},r.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]},r.cross=function(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t},r.lerp=function(t,r,e,n){var a=r[0],o=r[1];return t[0]=a+n*(e[0]-a),t[1]=o+n*(e[1]-o),t},r.random=function(t,r){r=r||1;var e=2*l.RANDOM()*Math.PI;return t[0]=Math.cos(e)*r,t[1]=Math.sin(e)*r,t},r.transformMat2=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a,t[1]=e[1]*n+e[3]*a,t},r.transformMat2d=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a+e[4],t[1]=e[1]*n+e[3]*a+e[5],t},r.transformMat3=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[3]*a+e[6],t[1]=e[1]*n+e[4]*a+e[7],t},r.transformMat4=function(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[4]*a+e[12],t[1]=e[1]*n+e[5]*a+e[13],t},r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]},r.equals=function(t,r){var e=t[0],n=t[1],a=r[0],o=r[1];return Math.abs(e-a)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(n-o)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))};var l=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r}(e(0));r.len=h,r.sub=a,r.mul=o,r.div=i,r.dist=u,r.sqrDist=s,r.sqrLen=c,r.forEach=function(){var t=n();return function(r,e,n,a,o,i){var u=void 0,s=void 0;for(e||(e=2),n||(n=0),s=a?Math.min(a*e+n,r.length):r.length,u=n;u<s;u+=e)t[0]=r[u],t[1]=r[u+1],o(t,t,i),r[u]=t[0],r[u+1]=t[1];return r}}()}])}),function(){function t(t){t=String(t),e.innerText=t,e.setAttribute("style",this._style),document.body.append(e);var r=t.split("\n"),o=this.style.stroke,i=e.offsetHeight/r.length,u=.25*i;switch(n.width=e.offsetWidth+2*o,n.height=e.offsetHeight,a.clearRect(0,0,n.width,n.height),a.fillStyle=this.style.background,a.beginPath(),a.fillRect(0,0,n.width,n.height),a.fill(),a.font=this.style.size+"pt "+this.style.font,a.textAlign=this.style.align,a.lineWidth=this.style.stroke,a.strokeStyle=this.style.strokeColor,a.fillStyle=this.style.color,a.textAlign){case"center":o=n.width/2;break;case"right":o=n.width-o}r.forEach(function(t,r){this.style.stroke&&a.strokeText(t,o,i*(r+1)-u),a.fillText(t,o,i*(r+1)-u)}.bind(this)),document.body.removeChild(e)}var r,e=document.createElement("pre"),n=document.createElement("canvas"),a=n.getContext("2d"),o={font:"Sans-serif",align:"left",color:"#000000",size:16,background:"rgba(0, 0, 0, 0)",stroke:0,strokeColor:"#FFFFFF",lineHeight:"1.2em"};window.TextImage=function(t){return this instanceof TextImage?(this.setStyle(t),this):new TextImage(t)},(r=window.TextImage.prototype).setStyle=function(t){this.style=t||{};for(var r in o)this.style[r]||(this.style[r]=o[r]);return this._style="font: "+this.style.size+"pt "+this.style.font+";",this._style+="line-height:"+this.style.lineHeight+";",this._style+="text-align: "+this.style.align+";",this._style+="color: "+this.style.color+";",this._style+="background-color: "+this.style.background+";",this._style+=";padding: 0; display: block; position: fixed; top: 100%; overflow: hidden;",this},r.toDataURL=function(r){return r&&t.call(this,r),n.toDataURL()},r.toImage=function(r,e){t.call(this,r);var a=new Image;return e&&(a.onload=e),a.src=n.toDataURL(),a}}(),function(){"use strict";function t(n){if(n||(n="#000F"),n=n.trim(),s[n])return t(s[n]);var o;return n=(o=h.exec(n))?[r(o[1]+o[1]),r(o[2]+o[2]),r(o[3]+o[3]),255]:(o=c.exec(n))?[r(o[1]+o[1]),r(o[2]+o[2]),r(o[3]+o[3]),r(o[4]+o[4])]:(o=l.exec(n))?[r(o[1]),r(o[2]),r(o[3]),255]:(o=f.exec(n))?[r(o[1]),r(o[2]),r(o[3]),r(o[4])]:(o=d.exec(n))?[e(o[1]),e(o[2]),e(o[3]),255]:(o=M.exec(n))?[e(o[1]),e(o[2]),e(o[3]),function(t){return a(255*parseFloat(t))}(o[4])]:[0,0,0,255]}function r(t){return a(parseInt(t,16))}function e(t){return a(parseInt(t,10))}function n(t){return("00"+t.toString(16)).slice(-2).toUpperCase()}function a(t){return Math.min(255,Math.max(0,t))}function o(t){return Math.round(100*t)/100}var i,u,s={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},h=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,c=/^#([0-9A-F])([0-9A-F])([0-9A-F])([0-9A-F])$/i,l=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,f=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,d=/^rgb\( *(\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *\)$/i,M=/^rgba\( *(\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d*(\.\d+)?) *\)$/i;(i=(u=function(r){return this instanceof u?(this.color=t(r),this):new u(r)}).prototype).hex=function(){return"#"+n(this.color[0])+n(this.color[1])+n(this.color[2])},i.hexa=function(){return"#"+n(this.color[0])+n(this.color[1])+n(this.color[2])+n(this.color[3])},i.rgb=function(){return"rgb("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")"},i.rgba=function(){return"rgba("+this.color[0]+", "+this.color[1]+", "+this.color[2]+", "+o(this.color[3]/255)+")"},i.vec3=function(){return[o(this.color[0]/255),o(this.color[1]/255),o(this.color[2]/255)]},i.vec4=function(){return[o(this.color[0]/255),o(this.color[1]/255),o(this.color[2]/255),o(this.color[3]/255)]},"undefined"!=typeof module&&module.exports?module.exports=u:window.Color=u}(),function(){function t(){var t=this.gl;mat4.perspective(this.gl.projectionMatrix,45*Math.PI/180,this.gl.canvas.clientWidth/this.gl.canvas.clientHeight,1,-this.opt.R*this.z*.9),mat4.identity(t.modelViewMatrix),mat4.translate(t.modelViewMatrix,t.modelViewMatrix,[0,0,this.opt.R*this.z]),mat4.rotate(t.modelViewMatrix,t.modelViewMatrix,this.x,[1,0,0]),mat4.rotate(t.modelViewMatrix,t.modelViewMatrix,this.y,[0,1,0]),t.uniformMatrix4fv(t.uniforms.projectionMatrix,!1,t.projectionMatrix),t.uniformMatrix4fv(t.uniforms.modelViewMatrix,!1,t.modelViewMatrix),this.buffers.forEach(function(r){!function(r){t.bindBuffer(t.ARRAY_BUFFER,r.position),t.vertexAttribPointer(t.attribs.vertexPosition,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(t.attribs.vertexPosition),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices),r.texture?(t.uniform1i(t.uniforms.useColor,!1),t.bindBuffer(t.ARRAY_BUFFER,r.texture.coords),t.vertexAttribPointer(t.attribs.textureCoord,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(t.attribs.textureCoord),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r.texture),t.uniform1i(t.uniforms.sampler,0)):(t.uniform1i(t.uniforms.useColor,!0),t.disableVertexAttribArray(t.attribs.textureCoord),t.uniform1i(t.uniforms.sampler,null),t.uniform4fv(t.uniforms.vertexColor,r.color)),t.drawElements(r.type,r.size,t.UNSIGNED_SHORT,0)}(r)})}function r(){for(var r=this.opt.sphere||Color("#E0FFFF").vec4(),e=this.gl,n=e.createBuffer(),a=[],o=e.createBuffer(),u=[],s=this.precision=1,h=180/s,c=360/s,l=[],f=90;f>=-90;f-=s)for(var d=0;d<=360;d+=s)l.push([d,f]);!function(t,r,e){var n=t.length-1;t.forEach(function(t,a){setTimeout(function(){r(t),a==n&&e&&e(t,a)}.bind(this),0)}.bind(this))}(l,function(t){a.push.apply(a,i(this,t))}.bind(this),function(i,s){this.positions=a;for(var l=c+1,f=0;f<h;f++)for(var d=0;d<c;d++){var M=f*l+d,v=M+l;u.push(M),u.push(v),u.push(M+1),u.push(v),u.push(v+1),u.push(M+1)}e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,new Float32Array(a),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(u),e.STATIC_DRAW),this.buffers.unshift({type:e.TRIANGLES,color:r,position:n,indices:o,size:u.length}),t.call(this)}.bind(this))}function e(r,e){this.x-=n(this.lastY-e)/10,Math.round(this.x/Math.PI)%2?this.y+=n(this.lastX-r)/10:this.y-=n(this.lastX-r)/10,t.call(this),this.lastX=r,this.lastY=e}function n(t){return t*Math.PI/180}function a(t){return 180*t/Math.PI}function o(t,r,e,o){var i=e/(void 0!==r[2]?r[2]+t.opt.R:t.opt.R),o=n(o),u=n(r[0]),s=n(r[1]),h=Math.sin(s),c=Math.cos(s),l=Math.sin(i),f=Math.cos(i),d=h*f+c*l*Math.cos(o);return s=Math.asin(d),u=n(r[0])+Math.atan2(Math.sin(o)*l*c,f-h*d),[(a(u)+540)%360-180,a(s),r[2]]}function i(t,r){var e=void 0!==r[2]?r[2]+t.opt.R:t.opt.R,n=(180+r[0])*(Math.PI/180),a=(90-r[1])*(Math.PI/180);return[-e*Math.sin(a)*Math.cos(n),e*Math.cos(a),e*Math.sin(a)*Math.sin(n)]}function u(t){return(t&-t)===t}var s,h="attribute vec4 vertexPosition;         attribute vec2 textureCoord;         uniform mat4 projectionMatrix;         uniform mat4 modelViewMatrix;         varying vec2 coord;         void main(void) {             gl_Position = projectionMatrix * modelViewMatrix * vertexPosition;             coord = textureCoord;         }",c="precision mediump float;         uniform bool useColor;         uniform vec4 vertexColor;         uniform sampler2D sampler;         varying vec2 coord;         void main(void) {             if (useColor) {                 gl_FragColor = vertexColor;             } else {                 vec4 color = texture2D(sampler, vec2(coord.s, coord.t));                 gl_FragColor = vec4(color.rgb, color.a);             }         }",l=TextImage({align:"center",color:"#000000",size:24,stroke:4,strokeColor:"#FFFFFF"}),f={R:1,minZoom:-4,maxZoom:-1.01};window.WebGLPlanet=function(t){for(var n in f)t[n]||(t[n]=f[n]);this.opt=t;var a=document.createElement("canvas");t.dom.appendChild(a),a.style.width="100%",a.style.height="100%",a.style.cursor="grab";var o=this.gl=a.getContext("webgl")||a.getContext("experimental-webgl");if(!o)throw"Unable to initialize WebGL. Your browser may not support it.";if(function(t){var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,h),t.compileShader(r);var e=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(e,c),t.compileShader(e);var n=t.createProgram();if(t.attachShader(n,r),t.attachShader(n,e),t.linkProgram(n),!t.getProgramParameter(n,t.LINK_STATUS))throw"Could not initialise shaders";t.attribs={vertexPosition:t.getAttribLocation(n,"vertexPosition"),textureCoord:t.getAttribLocation(n,"textureCoord")},t.uniforms={projectionMatrix:t.getUniformLocation(n,"projectionMatrix"),modelViewMatrix:t.getUniformLocation(n,"modelViewMatrix"),vertexColor:t.getUniformLocation(n,"vertexColor"),useColor:t.getUniformLocation(n,"useColor"),sampler:t.getUniformLocation(n,"sampler")},t.useProgram(n),t.projectionMatrix=mat4.create(),t.modelViewMatrix=mat4.create(),t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.depthMask(!0),t.enable(t.BLEND),t.depthMask(!0),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}(o),window.addEventListener("resize",this.resizeEvent=this.updateSize.bind(this),!1),window.TouchEvent){var i=function(t){t.preventDefault(),this.lastScale===t.scale&&e.call(this,t.touches[0].screenX,t.touches[0].screenY)}.bind(this),u=function(t){t.preventDefault(),this.zoom(Math.floor((this.z-(this.lastScale-t.scale))*d)/d),this.lastScale=t.scale}.bind(this);a.addEventListener("touchstart",function(t){t.preventDefault(),t.touches.length<2?a.removeEventListener("touchmove",i):(this.lastScale=t.scale,this.lastX=t.touches[0].screenX,this.lastY=t.touches[0].screenY,a.addEventListener("touchmove",i),a.addEventListener("touchmove",u))}.bind(this),!1),a.addEventListener("touchend",function(t){t.preventDefault(),a.removeEventListener("touchmove",i),a.removeEventListener("touchmove",u)},!1)}else{var s=function(t){t.preventDefault(),e.call(this,t.clientX,t.clientY)}.bind(this),l=function(t){t.preventDefault(),this.zoom(Math.floor((this.z-t.deltaY/d)*d)/d)}.bind(this);a.addEventListener("mousedown",function(t){a.style.cursor="grabbing",this.lastX=t.clientX,this.lastY=t.clientY,a.addEventListener("mousemove",s)}.bind(this),!1),a.addEventListener("mouseup",function(t){a.style.cursor="grab",a.removeEventListener("mousemove",s)},!1),a.addEventListener("mouseover",function(t){a.addEventListener("wheel",l)},!1),a.addEventListener("mouseout",function(t){a.removeEventListener("wheel",l)},!1)}return this.center(0,0),this.zoom(t.minZoom),this.updateSize(),this.buffers=[],r.call(this),this},(s=window.WebGLPlanet.prototype).center=function(r,e){return 2==arguments.length&&(this.x=n(e),this.y=n(-r-90),this.buffers&&t.call(this)),[-a(this.y)-90,a(this.x)]},s.zoom=function(r){return void 0!==r&&(r=Math.min(Math.max(r,this.opt.minZoom),this.opt.maxZoom))!==this.z&&(this.z=r,this.buffers&&t.call(this)),this.z},s.drawGeoJSON=function(t){if("FeatureCollection"===t.type)t.features.forEach(function(t){this.drawGeoJSON(t)}.bind(this));else if("Feature"===t.type)switch(t.geometry.type){case"Point":setTimeout(function(){this.drawPoint(t.geometry.coordinates[0],Color("black").vec4())}.bind(this),0);break;case"MultiPoint":t.geometry.coordinates.forEach(function(t){setTimeout(function(){this.drawPoint(t[0],Color("black").vec4())}.bind(this),0)}.bind(this));break;case"LineString":setTimeout(function(){this.drawLine(t.geometry.coordinates[0],Color("red").vec4())}.bind(this),0);break;case"MultiLineString":t.geometry.coordinates.forEach(function(t){setTimeout(function(){this.drawLine(t[0],Color("red").vec4())}.bind(this),0)}.bind(this));break;case"Polygon":setTimeout(function(){this.drawPolygon(t.geometry.coordinates[0],Color("green").vec4())}.bind(this),0);break;case"MultiPolygon":t.geometry.coordinates.forEach(function(t){setTimeout(function(){this.drawPolygon(t[0],Color("green").vec4())}.bind(this),0)}.bind(this))}},s.drawText=function(t,r,e){this.gl;var n=l.toImage(t,function(){var t=n.width*e,a=n.height*e,i=o(this,r,t,-90),u=o(this,r,t,90),s=o(this,r,t,90),h=o(this,r,t,-90);90===r[1]?(i=o(this,i,a,-90),u=o(this,u,a,90),s=o(this,s,a,-90),h=o(this,h,a,90)):-90===r[1]?(i=o(this,i,a,90),u=o(this,u,a,-90),s=o(this,s,a,90),h=o(this,h,a,-90)):(i=o(this,i,a,0),u=o(this,u,a,0),s=o(this,s,a,180),h=o(this,h,a,180)),this.drawImage(n,[i,u,s,h])}.bind(this))},s.drawImage=function(r,e){var n,a,o=this.gl,s=o.createTexture(),h=o.createBuffer(),c=o.createBuffer(),l=o.createBuffer(),f=[];f.push.apply(f,i(this,e[0])),f.push.apply(f,i(this,e[1])),f.push.apply(f,i(this,e[2])),f.push.apply(f,i(this,e[3])),n=[0,1,2,0,2,3],a=[0,0,1,0,1,1,0,1],o.bindBuffer(o.ARRAY_BUFFER,h),o.bufferData(o.ARRAY_BUFFER,new Float32Array(f),o.STATIC_DRAW),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,l),o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),o.STATIC_DRAW),o.bindBuffer(o.ARRAY_BUFFER,c),o.bufferData(o.ARRAY_BUFFER,new Float32Array(a),o.STATIC_DRAW),s.coords=c,o.bindTexture(o.TEXTURE_2D,s),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,r),u(r.width)&&u(r.height)?o.generateMipmap(o.TEXTURE_2D):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR)),this.buffers.push({type:o.TRIANGLES,texture:s,position:h,indices:l,size:n.length}),t.call(this)},s.drawPoint=function(r,e){var n=this.gl,a=n.createBuffer(),o=i(this,r),u=n.createBuffer(),s=[0];n.bindBuffer(n.ARRAY_BUFFER,a),n.bufferData(n.ARRAY_BUFFER,new Float32Array(o),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,u),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),n.STATIC_DRAW),this.buffers.push({type:n.POINT,color:e,position:a,indices:u,size:s.length}),t.call(this)},s.drawLine=function(r,e){for(var n=this.gl,o=n.createBuffer(),u=[],s=n.createBuffer(),h=[],c=0,l=r.length-1;c<l;c++){u.push.apply(u,i(this,r[c]));var f=r[c],d=r[c+1],M=a(Math.atan2(d[1]-f[1],d[0]-f[0])),v=(d[1]-f[1])/(d[0]-f[0]),m=[];switch(M){case 0:for(b=f[0];b<=d[0];b++)m[0]=b,m[1]=f[1],m[2]=f[2],u.push.apply(u,i(this,m));break;case 180:for(b=f[0];b>=d[0];b--)m[0]=b,m[1]=f[1],m[2]=f[2],u.push.apply(u,i(this,m));break;case 90:for(p=f[1];p<=d[1];p++)m[0]=f[0],m[1]=p,m[2]=f[2],u.push.apply(u,i(this,m));break;case-90:for(p=f[1];p>=d[1];p--)m[0]=f[0],m[1]=p,m[2]=f[2],u.push.apply(u,i(this,m));break;default:if(M>-45&&M<45)for(b=f[0];b<=d[0];b++)m[0]=b,m[1]=v*(b-f[0])+f[1],m[2]=f[2],u.push.apply(u,i(this,m));else if(M>135||M<-135)for(var b=f[0];b>=d[0];b--)m[0]=b,m[1]=v*(b-f[0])+f[1],m[2]=f[2],u.push.apply(u,i(this,m));else if(M>0)for(p=f[1];p<=d[1];p++)m[0]=(p-f[1])/v+f[0],m[1]=p,m[2]=f[2],u.push.apply(u,i(this,m));else for(var p=f[1];p>=d[1];p--)m[0]=(p-f[1])/v+f[0],m[1]=p,m[2]=f[2],u.push.apply(u,i(this,m))}}u.push.apply(u,i(this,r[r.length-1]));for(var c=0,F=(l=u.length/3)-1;c<l;c++)h.push(c),c<F&&h.push(c+1);n.bindBuffer(n.ARRAY_BUFFER,o),n.bufferData(n.ARRAY_BUFFER,new Float32Array(u),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,s),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(h),n.STATIC_DRAW),this.buffers.push({type:n.LINES,color:e,position:o,indices:s,size:h.length}),t.call(this)},s.drawPolygon=function(r,e){var n=this.gl,a=n.createBuffer(),o=[],u=n.createBuffer(),s=[],h=r.length-1;r.forEach(function(t,r){o.push.apply(o,i(this,t)),s.push(r),r<h&&s.push(r+1)}.bind(this)),s.push(0),n.bindBuffer(n.ARRAY_BUFFER,a),n.bufferData(n.ARRAY_BUFFER,new Float32Array(o),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,u),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),n.STATIC_DRAW),this.buffers.push({type:n.LINES,color:e,position:a,indices:u,size:s.length}),t.call(this)},s.updateSize=function(){var r=this.gl;r.canvas.width=r.canvas.offsetWidth,r.canvas.height=r.canvas.offsetHeight,r.viewport(0,0,r.canvas.width,r.canvas.height),this.buffers&&t.call(this)},s.destroy=function(){window.removeEventListener("resize",this.resizeEvent,!1)};var d=100}();