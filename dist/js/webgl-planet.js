!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var n=r();for(var e in n)("object"==typeof exports?exports:t)[e]=n[e]}}(this,function(){return function(t){function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}var n={};return r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:e})},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},r.p="",r(r.s=4)}([function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.setMatrixArrayType=function(t){r.ARRAY_TYPE=a=t},r.toRadian=function(t){return t*o},r.equals=function(t,r){return Math.abs(t-r)<=e*Math.max(1,Math.abs(t),Math.abs(r))};var e=r.EPSILON=1e-6,a=r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,o=(r.RANDOM=Math.random,Math.PI/180)},function(t,r,n){"use strict";function e(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=r[6],h=r[7],l=r[8],f=n[0],M=n[1],d=n[2],v=n[3],m=n[4],b=n[5],F=n[6],E=n[7],p=n[8];return t[0]=f*e+M*i+d*c,t[1]=f*a+M*u+d*h,t[2]=f*o+M*s+d*l,t[3]=v*e+m*i+b*c,t[4]=v*a+m*u+b*h,t[5]=v*o+m*s+b*l,t[6]=F*e+E*i+p*c,t[7]=F*a+E*u+p*h,t[8]=F*o+E*s+p*l,t}function a(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t},r.clone=function(t){var r=new o.ARRAY_TYPE(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},r.fromValues=function(t,r,n,e,a,i,u,s,c){var h=new o.ARRAY_TYPE(9);return h[0]=t,h[1]=r,h[2]=n,h[3]=e,h[4]=a,h[5]=i,h[6]=u,h[7]=s,h[8]=c,h},r.set=function(t,r,n,e,a,o,i,u,s,c){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,r){if(t===r){var n=r[1],e=r[2],a=r[5];t[1]=r[3],t[2]=r[6],t[3]=n,t[5]=r[7],t[6]=e,t[7]=a}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t},r.invert=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],c=r[7],h=r[8],l=h*i-u*c,f=-h*o+u*s,M=c*o-i*s,d=n*l+e*f+a*M;return d?(d=1/d,t[0]=l*d,t[1]=(-h*e+a*c)*d,t[2]=(u*e-a*i)*d,t[3]=f*d,t[4]=(h*n-a*s)*d,t[5]=(-u*n+a*o)*d,t[6]=M*d,t[7]=(-c*n+e*s)*d,t[8]=(i*n-e*o)*d,t):null},r.adjoint=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],c=r[7],h=r[8];return t[0]=i*h-u*c,t[1]=a*c-e*h,t[2]=e*u-a*i,t[3]=u*s-o*h,t[4]=n*h-a*s,t[5]=a*o-n*u,t[6]=o*c-i*s,t[7]=e*s-n*c,t[8]=n*i-e*o,t},r.determinant=function(t){var r=t[0],n=t[1],e=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8];return r*(c*o-i*s)+n*(-c*a+i*u)+e*(s*a-o*u)},r.multiply=e,r.translate=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=r[6],h=r[7],l=r[8],f=n[0],M=n[1];return t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=f*e+M*i+c,t[7]=f*a+M*u+h,t[8]=f*o+M*s+l,t},r.rotate=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=r[6],h=r[7],l=r[8],f=Math.sin(n),M=Math.cos(n);return t[0]=M*e+f*i,t[1]=M*a+f*u,t[2]=M*o+f*s,t[3]=M*i-f*e,t[4]=M*u-f*a,t[5]=M*s-f*o,t[6]=c,t[7]=h,t[8]=l,t},r.scale=function(t,r,n){var e=n[0],a=n[1];return t[0]=e*r[0],t[1]=e*r[1],t[2]=e*r[2],t[3]=a*r[3],t[4]=a*r[4],t[5]=a*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t},r.fromRotation=function(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=0,t[3]=-n,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t},r.fromQuat=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=n+n,u=e+e,s=a+a,c=n*i,h=e*i,l=e*u,f=a*i,M=a*u,d=a*s,v=o*i,m=o*u,b=o*s;return t[0]=1-l-d,t[3]=h-b,t[6]=f+m,t[1]=h+b,t[4]=1-c-d,t[7]=M-v,t[2]=f-m,t[5]=M+v,t[8]=1-c-l,t},r.normalFromMat4=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],c=r[7],h=r[8],l=r[9],f=r[10],M=r[11],d=r[12],v=r[13],m=r[14],b=r[15],F=n*u-e*i,E=n*s-a*i,p=n*c-o*i,A=e*s-a*u,g=e*c-o*u,R=a*c-o*s,y=h*v-l*d,x=h*m-f*d,w=h*b-M*d,P=l*m-f*v,_=l*b-M*v,T=f*b-M*m,D=F*T-E*_+p*P+A*w-g*x+R*y;return D?(D=1/D,t[0]=(u*T-s*_+c*P)*D,t[1]=(s*w-i*T-c*x)*D,t[2]=(i*_-u*w+c*y)*D,t[3]=(a*_-e*T-o*P)*D,t[4]=(n*T-a*w+o*x)*D,t[5]=(e*w-n*_-o*y)*D,t[6]=(v*R-m*g+b*A)*D,t[7]=(m*p-d*R-b*E)*D,t[8]=(d*g-v*p+b*F)*D,t):null},r.projection=function(t,r,n){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t},r.subtract=a,r.multiplyScalar=function(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t},r.multiplyScalarAndAdd=function(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t[6]=r[6]+n[6]*e,t[7]=r[7]+n[7]*e,t[8]=r[8]+n[8]*e,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]},r.equals=function(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=t[8],f=r[0],M=r[1],d=r[2],v=r[3],m=r[4],b=r[5],F=r[6],E=r[7],p=r[8];return Math.abs(n-f)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(e-M)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(a-d)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-v)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-m)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-F)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(h-E)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(l-p)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}(n(0));r.mul=e,r.sub=a},function(t,r,n){"use strict";function e(){var t=new d.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var r=t[0],n=t[1],e=t[2];return Math.sqrt(r*r+n*n+e*e)}function o(t,r,n){var e=new d.ARRAY_TYPE(3);return e[0]=t,e[1]=r,e[2]=n,e}function i(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t}function u(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t[2]=r[2]*n[2],t}function s(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t[2]=r[2]/n[2],t}function c(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2];return Math.sqrt(n*n+e*e+a*a)}function h(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2];return n*n+e*e+a*a}function l(t){var r=t[0],n=t[1],e=t[2];return r*r+n*n+e*e}function f(t,r){var n=r[0],e=r[1],a=r[2],o=n*n+e*e+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o),t}function M(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0,r.create=e,r.clone=function(t){var r=new d.ARRAY_TYPE(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},r.length=a,r.fromValues=o,r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},r.set=function(t,r,n,e){return t[0]=r,t[1]=n,t[2]=e,t},r.add=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t},r.subtract=i,r.multiply=u,r.divide=s,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t},r.min=function(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t[2]=Math.min(r[2],n[2]),t},r.max=function(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t[2]=Math.max(r[2],n[2]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t},r.scale=function(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t},r.scaleAndAdd=function(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t},r.distance=c,r.squaredDistance=h,r.squaredLength=l,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t},r.normalize=f,r.dot=M,r.cross=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-e*s,t[2]=e*u-a*i,t},r.lerp=function(t,r,n,e){var a=r[0],o=r[1],i=r[2];return t[0]=a+e*(n[0]-a),t[1]=o+e*(n[1]-o),t[2]=i+e*(n[2]-i),t},r.hermite=function(t,r,n,e,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),h=i*(3-2*o);return t[0]=r[0]*u+n[0]*s+e[0]*c+a[0]*h,t[1]=r[1]*u+n[1]*s+e[1]*c+a[1]*h,t[2]=r[2]*u+n[2]*s+e[2]*c+a[2]*h,t},r.bezier=function(t,r,n,e,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,h=3*o*u,l=3*s*i,f=s*o;return t[0]=r[0]*c+n[0]*h+e[0]*l+a[0]*f,t[1]=r[1]*c+n[1]*h+e[1]*l+a[1]*f,t[2]=r[2]*c+n[2]*h+e[2]*l+a[2]*f,t},r.random=function(t,r){r=r||1;var n=2*d.RANDOM()*Math.PI,e=2*d.RANDOM()-1,a=Math.sqrt(1-e*e)*r;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=e*r,t},r.transformMat4=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=n[3]*e+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*e+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*e+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*e+n[6]*a+n[10]*o+n[14])/i,t},r.transformMat3=function(t,r,n){var e=r[0],a=r[1],o=r[2];return t[0]=e*n[0]+a*n[3]+o*n[6],t[1]=e*n[1]+a*n[4]+o*n[7],t[2]=e*n[2]+a*n[5]+o*n[8],t},r.transformQuat=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=n[0],u=n[1],s=n[2],c=n[3],h=c*e+u*o-s*a,l=c*a+s*e-i*o,f=c*o+i*a-u*e,M=-i*e-u*a-s*o;return t[0]=h*c+M*-i+l*-s-f*-u,t[1]=l*c+M*-u+f*-i-h*-s,t[2]=f*c+M*-s+h*-u-l*-i,t},r.rotateX=function(t,r,n,e){var a=[],o=[];return a[0]=r[0]-n[0],a[1]=r[1]-n[1],a[2]=r[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(e)-a[2]*Math.sin(e),o[2]=a[1]*Math.sin(e)+a[2]*Math.cos(e),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},r.rotateY=function(t,r,n,e){var a=[],o=[];return a[0]=r[0]-n[0],a[1]=r[1]-n[1],a[2]=r[2]-n[2],o[0]=a[2]*Math.sin(e)+a[0]*Math.cos(e),o[1]=a[1],o[2]=a[2]*Math.cos(e)-a[0]*Math.sin(e),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},r.rotateZ=function(t,r,n,e){var a=[],o=[];return a[0]=r[0]-n[0],a[1]=r[1]-n[1],a[2]=r[2]-n[2],o[0]=a[0]*Math.cos(e)-a[1]*Math.sin(e),o[1]=a[0]*Math.sin(e)+a[1]*Math.cos(e),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},r.angle=function(t,r){var n=o(t[0],t[1],t[2]),e=o(r[0],r[1],r[2]);f(n,n),f(e,e);var a=M(n,e);return a>1?0:a<-1?Math.PI:Math.acos(a)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]},r.equals=function(t,r){var n=t[0],e=t[1],a=t[2],o=r[0],i=r[1],u=r[2];return Math.abs(n-o)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(e-i)<=d.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(a-u)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var d=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}(n(0));r.sub=i,r.mul=u,r.div=s,r.dist=c,r.sqrDist=h,r.len=a,r.sqrLen=l,r.forEach=function(){var t=e();return function(r,n,e,a,o,i){var u=void 0,s=void 0;for(n||(n=3),e||(e=0),s=a?Math.min(a*n+e,r.length):r.length,u=e;u<s;u+=n)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],o(t,t,i),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}()},function(t,r,n){"use strict";function e(){var t=new M.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t}function o(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t[2]=r[2]*n[2],t[3]=r[3]*n[3],t}function i(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t[2]=r[2]/n[2],t[3]=r[3]/n[3],t}function u(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t}function s(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2],o=r[3]-t[3];return Math.sqrt(n*n+e*e+a*a+o*o)}function c(t,r){var n=r[0]-t[0],e=r[1]-t[1],a=r[2]-t[2],o=r[3]-t[3];return n*n+e*e+a*a+o*o}function h(t){var r=t[0],n=t[1],e=t[2],a=t[3];return Math.sqrt(r*r+n*n+e*e+a*a)}function l(t){var r=t[0],n=t[1],e=t[2],a=t[3];return r*r+n*n+e*e+a*a}function f(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=n*n+e*e+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=e*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.len=r.sqrDist=r.dist=r.div=r.mul=r.sub=void 0,r.create=e,r.clone=function(t){var r=new M.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.fromValues=function(t,r,n,e){var a=new M.ARRAY_TYPE(4);return a[0]=t,a[1]=r,a[2]=n,a[3]=e,a},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},r.set=function(t,r,n,e,a){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t},r.add=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t},r.subtract=a,r.multiply=o,r.divide=i,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t},r.min=function(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t[2]=Math.min(r[2],n[2]),t[3]=Math.min(r[3],n[3]),t},r.max=function(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t[2]=Math.max(r[2],n[2]),t[3]=Math.max(r[3],n[3]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t},r.scale=u,r.scaleAndAdd=function(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t},r.distance=s,r.squaredDistance=c,r.length=h,r.squaredLength=l,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t},r.normalize=f,r.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},r.lerp=function(t,r,n,e){var a=r[0],o=r[1],i=r[2],u=r[3];return t[0]=a+e*(n[0]-a),t[1]=o+e*(n[1]-o),t[2]=i+e*(n[2]-i),t[3]=u+e*(n[3]-u),t},r.random=function(t,r){return r=r||1,t[0]=M.RANDOM(),t[1]=M.RANDOM(),t[2]=M.RANDOM(),t[3]=M.RANDOM(),f(t,t),u(t,t,r),t},r.transformMat4=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3];return t[0]=n[0]*e+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*e+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*e+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*e+n[7]*a+n[11]*o+n[15]*i,t},r.transformQuat=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=n[0],u=n[1],s=n[2],c=n[3],h=c*e+u*o-s*a,l=c*a+s*e-i*o,f=c*o+i*a-u*e,M=-i*e-u*a-s*o;return t[0]=h*c+M*-i+l*-s-f*-u,t[1]=l*c+M*-u+f*-i-h*-s,t[2]=f*c+M*-s+h*-u-l*-i,t[3]=r[3],t},r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]},r.equals=function(t,r){var n=t[0],e=t[1],a=t[2],o=t[3],i=r[0],u=r[1],s=r[2],c=r[3];return Math.abs(n-i)<=M.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(e-u)<=M.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(a-s)<=M.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=M.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))};var M=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}(n(0));r.sub=a,r.mul=o,r.div=i,r.dist=s,r.sqrDist=c,r.len=h,r.sqrLen=l,r.forEach=function(){var t=e();return function(r,n,e,a,o,i){var u=void 0,s=void 0;for(n||(n=4),e||(e=0),s=a?Math.min(a*n+e,r.length):r.length,u=e;u<s;u+=n)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],o(t,t,i),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}()},function(t,r,n){"use strict";function e(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}Object.defineProperty(r,"__esModule",{value:!0}),r.vec4=r.vec3=r.vec2=r.quat=r.mat4=r.mat3=r.mat2d=r.mat2=r.glMatrix=void 0;var a=e(n(0)),o=e(n(5)),i=e(n(6)),u=e(n(1)),s=e(n(7)),c=e(n(8)),h=e(n(9)),l=e(n(2)),f=e(n(3));r.glMatrix=a,r.mat2=o,r.mat2d=i,r.mat3=u,r.mat4=s,r.quat=c,r.vec2=h,r.vec3=l,r.vec4=f},function(t,r,n){"use strict";function e(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=n[0],s=n[1],c=n[2],h=n[3];return t[0]=e*u+o*s,t[1]=a*u+i*s,t[2]=e*c+o*h,t[3]=a*c+i*h,t}function a(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var r=new o.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,r,n,e){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=r,a[2]=n,a[3]=e,a},r.set=function(t,r,n,e,a){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t},r.transpose=function(t,r){if(t===r){var n=r[1];t[1]=r[2],t[2]=n}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t},r.invert=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=n*o-a*e;return i?(i=1/i,t[0]=o*i,t[1]=-e*i,t[2]=-a*i,t[3]=n*i,t):null},r.adjoint=function(t,r){var n=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=n,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=e,r.rotate=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s+o*u,t[1]=a*s+i*u,t[2]=e*-u+o*s,t[3]=a*-u+i*s,t},r.scale=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=n[0],s=n[1];return t[0]=e*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},r.fromRotation=function(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,r,n,e){return t[2]=e[2]/e[0],n[0]=e[0],n[1]=e[1],n[3]=e[3]-t[2]*n[1],[t,r,n]},r.add=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t},r.subtract=a,r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]},r.equals=function(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],u=r[0],s=r[1],c=r[2],h=r[3];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(e-s)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))},r.multiplyScalar=function(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t},r.multiplyScalarAndAdd=function(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}(n(0));r.mul=e,r.sub=a},function(t,r,n){"use strict";function e(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=n[0],h=n[1],l=n[2],f=n[3],M=n[4],d=n[5];return t[0]=e*c+o*h,t[1]=a*c+i*h,t[2]=e*l+o*f,t[3]=a*l+i*f,t[4]=e*M+o*d+u,t[5]=a*M+i*d+s,t}function a(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var r=new o.ARRAY_TYPE(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,r,n,e,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=r,u[2]=n,u[3]=e,u[4]=a,u[5]=i,u},r.set=function(t,r,n,e,a,o,i){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t},r.invert=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=n*o-e*a;return s?(s=1/s,t[0]=o*s,t[1]=-e*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(e*i-n*u)*s,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=e,r.rotate=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=Math.sin(n),h=Math.cos(n);return t[0]=e*h+o*c,t[1]=a*h+i*c,t[2]=e*-c+o*h,t[3]=a*-c+i*h,t[4]=u,t[5]=s,t},r.scale=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=n[0],h=n[1];return t[0]=e*c,t[1]=a*c,t[2]=o*h,t[3]=i*h,t[4]=u,t[5]=s,t},r.translate=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=n[0],h=n[1];return t[0]=e,t[1]=a,t[2]=o,t[3]=i,t[4]=e*c+o*h+u,t[5]=a*c+i*h+s,t},r.fromRotation=function(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=-n,t[3]=e,t[4]=0,t[5]=0,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t},r.subtract=a,r.multiplyScalar=function(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t},r.multiplyScalarAndAdd=function(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]},r.equals=function(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=r[0],h=r[1],l=r[2],f=r[3],M=r[4],d=r[5];return Math.abs(n-c)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(e-h)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(a-l)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-f)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-M)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(s-d)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}(n(0));r.mul=e,r.sub=a},function(t,r,n){"use strict";function e(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=r[4],s=r[5],c=r[6],h=r[7],l=r[8],f=r[9],M=r[10],d=r[11],v=r[12],m=r[13],b=r[14],F=r[15],E=n[0],p=n[1],A=n[2],g=n[3];return t[0]=E*e+p*u+A*l+g*v,t[1]=E*a+p*s+A*f+g*m,t[2]=E*o+p*c+A*M+g*b,t[3]=E*i+p*h+A*d+g*F,E=n[4],p=n[5],A=n[6],g=n[7],t[4]=E*e+p*u+A*l+g*v,t[5]=E*a+p*s+A*f+g*m,t[6]=E*o+p*c+A*M+g*b,t[7]=E*i+p*h+A*d+g*F,E=n[8],p=n[9],A=n[10],g=n[11],t[8]=E*e+p*u+A*l+g*v,t[9]=E*a+p*s+A*f+g*m,t[10]=E*o+p*c+A*M+g*b,t[11]=E*i+p*h+A*d+g*F,E=n[12],p=n[13],A=n[14],g=n[15],t[12]=E*e+p*u+A*l+g*v,t[13]=E*a+p*s+A*f+g*m,t[14]=E*o+p*c+A*M+g*b,t[15]=E*i+p*h+A*d+g*F,t}function a(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t[2]=r[2]-n[2],t[3]=r[3]-n[3],t[4]=r[4]-n[4],t[5]=r[5]-n[5],t[6]=r[6]-n[6],t[7]=r[7]-n[7],t[8]=r[8]-n[8],t[9]=r[9]-n[9],t[10]=r[10]-n[10],t[11]=r[11]-n[11],t[12]=r[12]-n[12],t[13]=r[13]-n[13],t[14]=r[14]-n[14],t[15]=r[15]-n[15],t}Object.defineProperty(r,"__esModule",{value:!0}),r.sub=r.mul=void 0,r.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var r=new o.ARRAY_TYPE(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},r.fromValues=function(t,r,n,e,a,i,u,s,c,h,l,f,M,d,v,m){var b=new o.ARRAY_TYPE(16);return b[0]=t,b[1]=r,b[2]=n,b[3]=e,b[4]=a,b[5]=i,b[6]=u,b[7]=s,b[8]=c,b[9]=h,b[10]=l,b[11]=f,b[12]=M,b[13]=d,b[14]=v,b[15]=m,b},r.set=function(t,r,n,e,a,o,i,u,s,c,h,l,f,M,d,v,m){return t[0]=r,t[1]=n,t[2]=e,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=c,t[9]=h,t[10]=l,t[11]=f,t[12]=M,t[13]=d,t[14]=v,t[15]=m,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.transpose=function(t,r){if(t===r){var n=r[1],e=r[2],a=r[3],o=r[6],i=r[7],u=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=n,t[6]=r[9],t[7]=r[13],t[8]=e,t[9]=o,t[11]=r[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t},r.invert=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],c=r[7],h=r[8],l=r[9],f=r[10],M=r[11],d=r[12],v=r[13],m=r[14],b=r[15],F=n*u-e*i,E=n*s-a*i,p=n*c-o*i,A=e*s-a*u,g=e*c-o*u,R=a*c-o*s,y=h*v-l*d,x=h*m-f*d,w=h*b-M*d,P=l*m-f*v,_=l*b-M*v,T=f*b-M*m,D=F*T-E*_+p*P+A*w-g*x+R*y;return D?(D=1/D,t[0]=(u*T-s*_+c*P)*D,t[1]=(a*_-e*T-o*P)*D,t[2]=(v*R-m*g+b*A)*D,t[3]=(f*g-l*R-M*A)*D,t[4]=(s*w-i*T-c*x)*D,t[5]=(n*T-a*w+o*x)*D,t[6]=(m*p-d*R-b*E)*D,t[7]=(h*R-f*p+M*E)*D,t[8]=(i*_-u*w+c*y)*D,t[9]=(e*w-n*_-o*y)*D,t[10]=(d*g-v*p+b*F)*D,t[11]=(l*p-h*g-M*F)*D,t[12]=(u*x-i*P-s*y)*D,t[13]=(n*P-e*x+a*y)*D,t[14]=(v*E-d*A-m*F)*D,t[15]=(h*A-l*E+f*F)*D,t):null},r.adjoint=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=r[4],u=r[5],s=r[6],c=r[7],h=r[8],l=r[9],f=r[10],M=r[11],d=r[12],v=r[13],m=r[14],b=r[15];return t[0]=u*(f*b-M*m)-l*(s*b-c*m)+v*(s*M-c*f),t[1]=-(e*(f*b-M*m)-l*(a*b-o*m)+v*(a*M-o*f)),t[2]=e*(s*b-c*m)-u*(a*b-o*m)+v*(a*c-o*s),t[3]=-(e*(s*M-c*f)-u*(a*M-o*f)+l*(a*c-o*s)),t[4]=-(i*(f*b-M*m)-h*(s*b-c*m)+d*(s*M-c*f)),t[5]=n*(f*b-M*m)-h*(a*b-o*m)+d*(a*M-o*f),t[6]=-(n*(s*b-c*m)-i*(a*b-o*m)+d*(a*c-o*s)),t[7]=n*(s*M-c*f)-i*(a*M-o*f)+h*(a*c-o*s),t[8]=i*(l*b-M*v)-h*(u*b-c*v)+d*(u*M-c*l),t[9]=-(n*(l*b-M*v)-h*(e*b-o*v)+d*(e*M-o*l)),t[10]=n*(u*b-c*v)-i*(e*b-o*v)+d*(e*c-o*u),t[11]=-(n*(u*M-c*l)-i*(e*M-o*l)+h*(e*c-o*u)),t[12]=-(i*(l*m-f*v)-h*(u*m-s*v)+d*(u*f-s*l)),t[13]=n*(l*m-f*v)-h*(e*m-a*v)+d*(e*f-a*l),t[14]=-(n*(u*m-s*v)-i*(e*m-a*v)+d*(e*s-a*u)),t[15]=n*(u*f-s*l)-i*(e*f-a*l)+h*(e*s-a*u),t},r.determinant=function(t){var r=t[0],n=t[1],e=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],h=t[9],l=t[10],f=t[11],M=t[12],d=t[13],v=t[14],m=t[15];return(r*i-n*o)*(l*m-f*v)-(r*u-e*o)*(h*m-f*d)+(r*s-a*o)*(h*v-l*d)+(n*u-e*i)*(c*m-f*M)-(n*s-a*i)*(c*v-l*M)+(e*s-a*u)*(c*d-h*M)},r.multiply=e,r.translate=function(t,r,n){var e=n[0],a=n[1],o=n[2],i=void 0,u=void 0,s=void 0,c=void 0,h=void 0,l=void 0,f=void 0,M=void 0,d=void 0,v=void 0,m=void 0,b=void 0;return r===t?(t[12]=r[0]*e+r[4]*a+r[8]*o+r[12],t[13]=r[1]*e+r[5]*a+r[9]*o+r[13],t[14]=r[2]*e+r[6]*a+r[10]*o+r[14],t[15]=r[3]*e+r[7]*a+r[11]*o+r[15]):(i=r[0],u=r[1],s=r[2],c=r[3],h=r[4],l=r[5],f=r[6],M=r[7],d=r[8],v=r[9],m=r[10],b=r[11],t[0]=i,t[1]=u,t[2]=s,t[3]=c,t[4]=h,t[5]=l,t[6]=f,t[7]=M,t[8]=d,t[9]=v,t[10]=m,t[11]=b,t[12]=i*e+h*a+d*o+r[12],t[13]=u*e+l*a+v*o+r[13],t[14]=s*e+f*a+m*o+r[14],t[15]=c*e+M*a+b*o+r[15]),t},r.scale=function(t,r,n){var e=n[0],a=n[1],o=n[2];return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=r[11]*o,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},r.rotate=function(t,r,n,e){var a=e[0],i=e[1],u=e[2],s=Math.sqrt(a*a+i*i+u*u),c=void 0,h=void 0,l=void 0,f=void 0,M=void 0,d=void 0,v=void 0,m=void 0,b=void 0,F=void 0,E=void 0,p=void 0,A=void 0,g=void 0,R=void 0,y=void 0,x=void 0,w=void 0,P=void 0,_=void 0,T=void 0,D=void 0,L=void 0,S=void 0;return Math.abs(s)<o.EPSILON?null:(s=1/s,a*=s,i*=s,u*=s,c=Math.sin(n),h=Math.cos(n),l=1-h,f=r[0],M=r[1],d=r[2],v=r[3],m=r[4],b=r[5],F=r[6],E=r[7],p=r[8],A=r[9],g=r[10],R=r[11],y=a*a*l+h,x=i*a*l+u*c,w=u*a*l-i*c,P=a*i*l-u*c,_=i*i*l+h,T=u*i*l+a*c,D=a*u*l+i*c,L=i*u*l-a*c,S=u*u*l+h,t[0]=f*y+m*x+p*w,t[1]=M*y+b*x+A*w,t[2]=d*y+F*x+g*w,t[3]=v*y+E*x+R*w,t[4]=f*P+m*_+p*T,t[5]=M*P+b*_+A*T,t[6]=d*P+F*_+g*T,t[7]=v*P+E*_+R*T,t[8]=f*D+m*L+p*S,t[9]=M*D+b*L+A*S,t[10]=d*D+F*L+g*S,t[11]=v*D+E*L+R*S,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},r.rotateX=function(t,r,n){var e=Math.sin(n),a=Math.cos(n),o=r[4],i=r[5],u=r[6],s=r[7],c=r[8],h=r[9],l=r[10],f=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=o*a+c*e,t[5]=i*a+h*e,t[6]=u*a+l*e,t[7]=s*a+f*e,t[8]=c*a-o*e,t[9]=h*a-i*e,t[10]=l*a-u*e,t[11]=f*a-s*e,t},r.rotateY=function(t,r,n){var e=Math.sin(n),a=Math.cos(n),o=r[0],i=r[1],u=r[2],s=r[3],c=r[8],h=r[9],l=r[10],f=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a-c*e,t[1]=i*a-h*e,t[2]=u*a-l*e,t[3]=s*a-f*e,t[8]=o*e+c*a,t[9]=i*e+h*a,t[10]=u*e+l*a,t[11]=s*e+f*a,t},r.rotateZ=function(t,r,n){var e=Math.sin(n),a=Math.cos(n),o=r[0],i=r[1],u=r[2],s=r[3],c=r[4],h=r[5],l=r[6],f=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=o*a+c*e,t[1]=i*a+h*e,t[2]=u*a+l*e,t[3]=s*a+f*e,t[4]=c*a-o*e,t[5]=h*a-i*e,t[6]=l*a-u*e,t[7]=f*a-s*e,t},r.fromTranslation=function(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},r.fromScaling=function(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,r,n){var e=n[0],a=n[1],i=n[2],u=Math.sqrt(e*e+a*a+i*i),s=void 0,c=void 0,h=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,e*=u,a*=u,i*=u,s=Math.sin(r),c=Math.cos(r),h=1-c,t[0]=e*e*h+c,t[1]=a*e*h+i*s,t[2]=i*e*h-a*s,t[3]=0,t[4]=e*a*h-i*s,t[5]=a*a*h+c,t[6]=i*a*h+e*s,t[7]=0,t[8]=e*i*h+a*s,t[9]=a*i*h-e*s,t[10]=i*i*h+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,r){var n=Math.sin(r),e=Math.cos(r);return t[0]=e,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=e+e,s=a+a,c=o+o,h=e*u,l=e*s,f=e*c,M=a*s,d=a*c,v=o*c,m=i*u,b=i*s,F=i*c;return t[0]=1-(M+v),t[1]=l+F,t[2]=f-b,t[3]=0,t[4]=l-F,t[5]=1-(h+v),t[6]=d+m,t[7]=0,t[8]=f+b,t[9]=d-m,t[10]=1-(h+M),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},r.getTranslation=function(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t},r.getScaling=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[4],i=r[5],u=r[6],s=r[8],c=r[9],h=r[10];return t[0]=Math.sqrt(n*n+e*e+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(s*s+c*c+h*h),t},r.getRotation=function(t,r){var n=r[0]+r[5]+r[10],e=0;return n>0?(e=2*Math.sqrt(n+1),t[3]=.25*e,t[0]=(r[6]-r[9])/e,t[1]=(r[8]-r[2])/e,t[2]=(r[1]-r[4])/e):r[0]>r[5]&r[0]>r[10]?(e=2*Math.sqrt(1+r[0]-r[5]-r[10]),t[3]=(r[6]-r[9])/e,t[0]=.25*e,t[1]=(r[1]+r[4])/e,t[2]=(r[8]+r[2])/e):r[5]>r[10]?(e=2*Math.sqrt(1+r[5]-r[0]-r[10]),t[3]=(r[8]-r[2])/e,t[0]=(r[1]+r[4])/e,t[1]=.25*e,t[2]=(r[6]+r[9])/e):(e=2*Math.sqrt(1+r[10]-r[0]-r[5]),t[3]=(r[1]-r[4])/e,t[0]=(r[8]+r[2])/e,t[1]=(r[6]+r[9])/e,t[2]=.25*e),t},r.fromRotationTranslationScale=function(t,r,n,e){var a=r[0],o=r[1],i=r[2],u=r[3],s=a+a,c=o+o,h=i+i,l=a*s,f=a*c,M=a*h,d=o*c,v=o*h,m=i*h,b=u*s,F=u*c,E=u*h,p=e[0],A=e[1],g=e[2];return t[0]=(1-(d+m))*p,t[1]=(f+E)*p,t[2]=(M-F)*p,t[3]=0,t[4]=(f-E)*A,t[5]=(1-(l+m))*A,t[6]=(v+b)*A,t[7]=0,t[8]=(M+F)*g,t[9]=(v-b)*g,t[10]=(1-(l+d))*g,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,r,n,e,a){var o=r[0],i=r[1],u=r[2],s=r[3],c=o+o,h=i+i,l=u+u,f=o*c,M=o*h,d=o*l,v=i*h,m=i*l,b=u*l,F=s*c,E=s*h,p=s*l,A=e[0],g=e[1],R=e[2],y=a[0],x=a[1],w=a[2];return t[0]=(1-(v+b))*A,t[1]=(M+p)*A,t[2]=(d-E)*A,t[3]=0,t[4]=(M-p)*g,t[5]=(1-(f+b))*g,t[6]=(m+F)*g,t[7]=0,t[8]=(d+E)*R,t[9]=(m-F)*R,t[10]=(1-(f+v))*R,t[11]=0,t[12]=n[0]+y-(t[0]*y+t[4]*x+t[8]*w),t[13]=n[1]+x-(t[1]*y+t[5]*x+t[9]*w),t[14]=n[2]+w-(t[2]*y+t[6]*x+t[10]*w),t[15]=1,t},r.fromQuat=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=n+n,u=e+e,s=a+a,c=n*i,h=e*i,l=e*u,f=a*i,M=a*u,d=a*s,v=o*i,m=o*u,b=o*s;return t[0]=1-l-d,t[1]=h+b,t[2]=f-m,t[3]=0,t[4]=h-b,t[5]=1-c-d,t[6]=M+v,t[7]=0,t[8]=f+m,t[9]=M-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,r,n,e,a,o,i){var u=1/(n-r),s=1/(a-e),c=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+r)*u,t[9]=(a+e)*s,t[10]=(i+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*c,t[15]=0,t},r.perspective=function(t,r,n,e,a){var o=1/Math.tan(r/2),i=1/(e-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+e)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*e*i,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,r,n,e){var a=Math.tan(r.upDegrees*Math.PI/180),o=Math.tan(r.downDegrees*Math.PI/180),i=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(i-u)*s*.5,t[9]=(a-o)*c*.5,t[10]=e/(n-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*n/(n-e),t[15]=0,t},r.ortho=function(t,r,n,e,a,o,i){var u=1/(r-n),s=1/(e-a),c=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(r+n)*u,t[13]=(a+e)*s,t[14]=(i+o)*c,t[15]=1,t},r.lookAt=function(t,r,n,e){var a=void 0,i=void 0,u=void 0,s=void 0,c=void 0,h=void 0,l=void 0,f=void 0,M=void 0,d=void 0,v=r[0],m=r[1],b=r[2],F=e[0],E=e[1],p=e[2],A=n[0],g=n[1],R=n[2];return Math.abs(v-A)<o.EPSILON&&Math.abs(m-g)<o.EPSILON&&Math.abs(b-R)<o.EPSILON?mat4.identity(t):(l=v-A,f=m-g,M=b-R,d=1/Math.sqrt(l*l+f*f+M*M),l*=d,f*=d,M*=d,a=E*M-p*f,i=p*l-F*M,u=F*f-E*l,(d=Math.sqrt(a*a+i*i+u*u))?(a*=d=1/d,i*=d,u*=d):(a=0,i=0,u=0),s=f*u-M*i,c=M*a-l*u,h=l*i-f*a,(d=Math.sqrt(s*s+c*c+h*h))?(s*=d=1/d,c*=d,h*=d):(s=0,c=0,h=0),t[0]=a,t[1]=s,t[2]=l,t[3]=0,t[4]=i,t[5]=c,t[6]=f,t[7]=0,t[8]=u,t[9]=h,t[10]=M,t[11]=0,t[12]=-(a*v+i*m+u*b),t[13]=-(s*v+c*m+h*b),t[14]=-(l*v+f*m+M*b),t[15]=1,t)},r.targetTo=function(t,r,n,e){var a=r[0],o=r[1],i=r[2],u=e[0],s=e[1],c=e[2],h=a-n[0],l=o-n[1],f=i-n[2],M=h*h+l*l+f*f;M>0&&(h*=M=1/Math.sqrt(M),l*=M,f*=M);var d=s*f-c*l,v=c*h-u*f,m=u*l-s*h;return t[0]=d,t[1]=v,t[2]=m,t[3]=0,t[4]=l*m-f*v,t[5]=f*d-h*m,t[6]=h*v-l*d,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.add=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t[2]=r[2]+n[2],t[3]=r[3]+n[3],t[4]=r[4]+n[4],t[5]=r[5]+n[5],t[6]=r[6]+n[6],t[7]=r[7]+n[7],t[8]=r[8]+n[8],t[9]=r[9]+n[9],t[10]=r[10]+n[10],t[11]=r[11]+n[11],t[12]=r[12]+n[12],t[13]=r[13]+n[13],t[14]=r[14]+n[14],t[15]=r[15]+n[15],t},r.subtract=a,r.multiplyScalar=function(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=r[7]*n,t[8]=r[8]*n,t[9]=r[9]*n,t[10]=r[10]*n,t[11]=r[11]*n,t[12]=r[12]*n,t[13]=r[13]*n,t[14]=r[14]*n,t[15]=r[15]*n,t},r.multiplyScalarAndAdd=function(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t[2]=r[2]+n[2]*e,t[3]=r[3]+n[3]*e,t[4]=r[4]+n[4]*e,t[5]=r[5]+n[5]*e,t[6]=r[6]+n[6]*e,t[7]=r[7]+n[7]*e,t[8]=r[8]+n[8]*e,t[9]=r[9]+n[9]*e,t[10]=r[10]+n[10]*e,t[11]=r[11]+n[11]*e,t[12]=r[12]+n[12]*e,t[13]=r[13]+n[13]*e,t[14]=r[14]+n[14]*e,t[15]=r[15]+n[15]*e,t},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]},r.equals=function(t,r){var n=t[0],e=t[1],a=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=t[8],f=t[9],M=t[10],d=t[11],v=t[12],m=t[13],b=t[14],F=t[15],E=r[0],p=r[1],A=r[2],g=r[3],R=r[4],y=r[5],x=r[6],w=r[7],P=r[8],_=r[9],T=r[10],D=r[11],L=r[12],S=r[13],I=r[14],O=r[15];return Math.abs(n-E)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(e-p)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(a-A)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(i-g)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(g))&&Math.abs(u-R)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(s-y)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-x)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-w)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(l-P)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(f-_)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(M-T)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(d-D)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(v-L)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(m-S)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(b-I)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(I))&&Math.abs(F-O)<=o.EPSILON*Math.max(1,Math.abs(F),Math.abs(O))};var o=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}(n(0));r.mul=e,r.sub=a},function(t,r,n){"use strict";function e(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}function a(){var t=new c.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,r,n){n*=.5;var e=Math.sin(n);return t[0]=e*r[0],t[1]=e*r[1],t[2]=e*r[2],t[3]=Math.cos(n),t}function i(t,r,n){var e=r[0],a=r[1],o=r[2],i=r[3],u=n[0],s=n[1],c=n[2],h=n[3];return t[0]=e*h+i*u+a*c-o*s,t[1]=a*h+i*s+o*u-e*c,t[2]=o*h+i*c+e*s-a*u,t[3]=i*h-e*u-a*s-o*c,t}function u(t,r,n,e){var a=r[0],o=r[1],i=r[2],u=r[3],s=n[0],c=n[1],h=n[2],l=n[3],f=void 0,M=void 0,d=void 0,v=void 0,m=void 0;return(M=a*s+o*c+i*h+u*l)<0&&(M=-M,s=-s,c=-c,h=-h,l=-l),1-M>1e-6?(f=Math.acos(M),d=Math.sin(f),v=Math.sin((1-e)*f)/d,m=Math.sin(e*f)/d):(v=1-e,m=e),t[0]=v*a+m*s,t[1]=v*o+m*c,t[2]=v*i+m*h,t[3]=v*u+m*l,t}function s(t,r){var n=r[0]+r[4]+r[8],e=void 0;if(n>0)e=Math.sqrt(n+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*o+o]-r[3*i+i]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*o+i]-r[3*i+o])*e,t[o]=(r[3*o+a]+r[3*a+o])*e,t[i]=(r[3*i+a]+r[3*a+i])*e}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.setAxes=r.sqlerp=r.rotationTo=r.equals=r.exactEquals=r.normalize=r.sqrLen=r.squaredLength=r.len=r.length=r.lerp=r.dot=r.scale=r.mul=r.add=r.set=r.copy=r.fromValues=r.clone=void 0,r.create=a,r.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},r.setAxisAngle=o,r.getAxisAngle=function(t,r){var n=2*Math.acos(r[3]),e=Math.sin(n/2);return 0!=e?(t[0]=r[0]/e,t[1]=r[1]/e,t[2]=r[2]/e):(t[0]=1,t[1]=0,t[2]=0),n},r.multiply=i,r.rotateX=function(t,r,n){n*=.5;var e=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-e*u,t},r.rotateY=function(t,r,n){n*=.5;var e=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s-o*u,t[1]=a*s+i*u,t[2]=o*s+e*u,t[3]=i*s-a*u,t},r.rotateZ=function(t,r,n){n*=.5;var e=r[0],a=r[1],o=r[2],i=r[3],u=Math.sin(n),s=Math.cos(n);return t[0]=e*s+a*u,t[1]=a*s-e*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},r.calculateW=function(t,r){var n=r[0],e=r[1],a=r[2];return t[0]=n,t[1]=e,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-e*e-a*a)),t},r.slerp=u,r.invert=function(t,r){var n=r[0],e=r[1],a=r[2],o=r[3],i=n*n+e*e+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-e*u,t[2]=-a*u,t[3]=o*u,t},r.conjugate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t},r.fromMat3=s,r.fromEuler=function(t,r,n,e){var a=.5*Math.PI/180;r*=a,n*=a,e*=a;var o=Math.sin(r),i=Math.cos(r),u=Math.sin(n),s=Math.cos(n),c=Math.sin(e),h=Math.cos(e);return t[0]=o*s*h-i*u*c,t[1]=i*u*h+o*s*c,t[2]=i*s*c-o*u*h,t[3]=i*s*h+o*u*c,t},r.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var c=e(n(0)),h=e(n(1)),l=e(n(2)),f=e(n(3)),M=(r.clone=f.clone,r.fromValues=f.fromValues,r.copy=f.copy,r.set=f.set,r.add=f.add,r.mul=i,r.scale=f.scale,r.dot=f.dot,r.lerp=f.lerp,r.length=f.length),d=(r.len=M,r.squaredLength=f.squaredLength),v=(r.sqrLen=d,r.normalize=f.normalize);r.exactEquals=f.exactEquals,r.equals=f.equals,r.rotationTo=function(){var t=l.create(),r=l.fromValues(1,0,0),n=l.fromValues(0,1,0);return function(e,a,i){var u=l.dot(a,i);return u<-.999999?(l.cross(t,r,a),l.len(t)<1e-6&&l.cross(t,n,a),l.normalize(t,t),o(e,t,Math.PI),e):u>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(l.cross(t,a,i),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+u,v(e,e))}}(),r.sqlerp=function(){var t=a(),r=a();return function(n,e,a,o,i,s){return u(t,e,i,s),u(r,a,o,s),u(n,t,r,2*s*(1-s)),n}}(),r.setAxes=function(){var t=h.create();return function(r,n,e,a){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],v(r,s(r,t))}}()},function(t,r,n){"use strict";function e(){var t=new l.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,r,n){return t[0]=r[0]-n[0],t[1]=r[1]-n[1],t}function o(t,r,n){return t[0]=r[0]*n[0],t[1]=r[1]*n[1],t}function i(t,r,n){return t[0]=r[0]/n[0],t[1]=r[1]/n[1],t}function u(t,r){var n=r[0]-t[0],e=r[1]-t[1];return Math.sqrt(n*n+e*e)}function s(t,r){var n=r[0]-t[0],e=r[1]-t[1];return n*n+e*e}function c(t){var r=t[0],n=t[1];return Math.sqrt(r*r+n*n)}function h(t){var r=t[0],n=t[1];return r*r+n*n}Object.defineProperty(r,"__esModule",{value:!0}),r.forEach=r.sqrLen=r.sqrDist=r.dist=r.div=r.mul=r.sub=r.len=void 0,r.create=e,r.clone=function(t){var r=new l.ARRAY_TYPE(2);return r[0]=t[0],r[1]=t[1],r},r.fromValues=function(t,r){var n=new l.ARRAY_TYPE(2);return n[0]=t,n[1]=r,n},r.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t},r.set=function(t,r,n){return t[0]=r,t[1]=n,t},r.add=function(t,r,n){return t[0]=r[0]+n[0],t[1]=r[1]+n[1],t},r.subtract=a,r.multiply=o,r.divide=i,r.ceil=function(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t},r.floor=function(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t},r.min=function(t,r,n){return t[0]=Math.min(r[0],n[0]),t[1]=Math.min(r[1],n[1]),t},r.max=function(t,r,n){return t[0]=Math.max(r[0],n[0]),t[1]=Math.max(r[1],n[1]),t},r.round=function(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t},r.scale=function(t,r,n){return t[0]=r[0]*n,t[1]=r[1]*n,t},r.scaleAndAdd=function(t,r,n,e){return t[0]=r[0]+n[0]*e,t[1]=r[1]+n[1]*e,t},r.distance=u,r.squaredDistance=s,r.length=c,r.squaredLength=h,r.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t},r.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t},r.normalize=function(t,r){var n=r[0],e=r[1],a=n*n+e*e;return a>0&&(a=1/Math.sqrt(a),t[0]=r[0]*a,t[1]=r[1]*a),t},r.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]},r.cross=function(t,r,n){var e=r[0]*n[1]-r[1]*n[0];return t[0]=t[1]=0,t[2]=e,t},r.lerp=function(t,r,n,e){var a=r[0],o=r[1];return t[0]=a+e*(n[0]-a),t[1]=o+e*(n[1]-o),t},r.random=function(t,r){r=r||1;var n=2*l.RANDOM()*Math.PI;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t},r.transformMat2=function(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[2]*a,t[1]=n[1]*e+n[3]*a,t},r.transformMat2d=function(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[2]*a+n[4],t[1]=n[1]*e+n[3]*a+n[5],t},r.transformMat3=function(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[3]*a+n[6],t[1]=n[1]*e+n[4]*a+n[7],t},r.transformMat4=function(t,r,n){var e=r[0],a=r[1];return t[0]=n[0]*e+n[4]*a+n[12],t[1]=n[1]*e+n[5]*a+n[13],t},r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,r){return t[0]===r[0]&&t[1]===r[1]},r.equals=function(t,r){var n=t[0],e=t[1],a=r[0],o=r[1];return Math.abs(n-a)<=l.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(e-o)<=l.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))};var l=function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r}(n(0));r.len=c,r.sub=a,r.mul=o,r.div=i,r.dist=u,r.sqrDist=s,r.sqrLen=h,r.forEach=function(){var t=e();return function(r,n,e,a,o,i){var u=void 0,s=void 0;for(n||(n=2),e||(e=0),s=a?Math.min(a*n+e,r.length):r.length,u=e;u<s;u+=n)t[0]=r[u],t[1]=r[u+1],o(t,t,i),r[u]=t[0],r[u+1]=t[1];return r}}()}])}),function(){function t(t){t=String(t),n.innerText=t,n.setAttribute("style",this._style),document.body.append(n);var r=t.split("\n"),o=Math.floor(this.style.stroke/2),i=n.offsetHeight/r.length,u=.2*i;switch(e.width=n.offsetWidth+o,e.height=n.offsetHeight,a.clearRect(0,0,e.width,e.height),a.fillStyle=this.style.background,a.beginPath(),a.fillRect(0,0,e.width,e.height),a.fill(),a.font=this.style.size+"pt "+this.style.font,a.textAlign=this.style.align,a.lineWidth=o,a.strokeStyle=this.style.strokeColor,a.fillStyle=this.style.color,a.textAlign){case"center":o=e.width/2;break;case"right":o=e.width-o}r.forEach(function(t,r){this.style.stroke&&a.strokeText(t,o,i*(r+1)-u),a.fillText(t,o,i*(r+1)-u)}.bind(this)),document.body.removeChild(n)}var r,n=document.createElement("pre"),e=document.createElement("canvas"),a=e.getContext("2d"),o={font:"Sans-serif",align:"left",color:"#000000",size:16,background:"rgba(0, 0, 0, 0)",stroke:0,strokeColor:"#FFFFFF"};window.TextImage=function(t){return this instanceof TextImage?(this.setStyle(t),this):new TextImage(t)},(r=window.TextImage.prototype).setStyle=function(t){this.style={};for(var r in o)t&&t[r]?this.style[r]=t[r]:this.style[r]=o[r];return this._style="font: "+this.style.size+"pt "+this.style.font+";",this._style+="line-height: 1;",this._style+="text-align: "+this.style.align+";",this._style+="color: "+this.style.color+";",this._style+="background-color: "+this.style.background+";",this._style+=";padding: 0; display: block; position: fixed; top: 100%;overflow: hidden",this},r.toDataURL=function(r){return r&&t.call(this,r),e.toDataURL()},r.toImage=function(r,n){t.call(this,r);var a=new Image;return n&&(a.onload=n),a.src=e.toDataURL(),a}}(),function(){"use strict";function t(e){if(e||(e="#000F"),e=e.trim(),s[e])return t(s[e]);var o;return e=(o=c.exec(e))?[r(o[1]+o[1]),r(o[2]+o[2]),r(o[3]+o[3]),255]:(o=h.exec(e))?[r(o[1]+o[1]),r(o[2]+o[2]),r(o[3]+o[3]),r(o[4]+o[4])]:(o=l.exec(e))?[r(o[1]),r(o[2]),r(o[3]),255]:(o=f.exec(e))?[r(o[1]),r(o[2]),r(o[3]),r(o[4])]:(o=M.exec(e))?[n(o[1]),n(o[2]),n(o[3]),255]:(o=d.exec(e))?[n(o[1]),n(o[2]),n(o[3]),function(t){return a(255*parseFloat(t))}(o[4])]:[0,0,0,255]}function r(t){return a(parseInt(t,16))}function n(t){return a(parseInt(t,10))}function e(t){return("00"+t.toString(16)).slice(-2).toUpperCase()}function a(t){return Math.min(255,Math.max(0,t))}function o(t){return Math.round(100*t)/100}var i,u,s={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},c=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i,h=/^#([0-9A-F])([0-9A-F])([0-9A-F])([0-9A-F])$/i,l=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,f=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,M=/^rgb\( *(\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *\)$/i,d=/^rgba\( *(\d{1,3}) *, *(\d{1,3}) *, *(\d{1,3}) *, *(\d*(\.\d+)?) *\)$/i;(i=(u=function(r){return this instanceof u?(this.color=t(r),this):new u(r)}).prototype).hex=function(){return"#"+e(this.color[0])+e(this.color[1])+e(this.color[2])},i.hexa=function(){return"#"+e(this.color[0])+e(this.color[1])+e(this.color[2])+e(this.color[3])},i.rgb=function(){return"rgb("+this.color[0]+", "+this.color[1]+", "+this.color[2]+")"},i.rgba=function(){return"rgba("+this.color[0]+", "+this.color[1]+", "+this.color[2]+", "+o(this.color[3]/255)+")"},i.vec3=function(){return[o(this.color[0]/255),o(this.color[1]/255),o(this.color[2]/255)]},i.vec4=function(){return[o(this.color[0]/255),o(this.color[1]/255),o(this.color[2]/255),o(this.color[3]/255)]},"undefined"!=typeof module&&module.exports?module.exports=u:window.Color=u}(),function(){function t(){var t=this.gl;mat4.perspective(this.gl.projectionMatrix,45*Math.PI/180,this.gl.canvas.clientWidth/this.gl.canvas.clientHeight,1,-this.opt.R*this.z*.9),mat4.identity(t.modelViewMatrix),mat4.translate(t.modelViewMatrix,t.modelViewMatrix,[0,0,this.opt.R*this.z]),mat4.rotate(t.modelViewMatrix,t.modelViewMatrix,this.x,[1,0,0]),mat4.rotate(t.modelViewMatrix,t.modelViewMatrix,this.y,[0,1,0]),t.uniformMatrix4fv(t.uniforms.projectionMatrix,!1,t.projectionMatrix),t.uniformMatrix4fv(t.uniforms.modelViewMatrix,!1,t.modelViewMatrix),this.buffers.forEach(function(r){!function(r){t.bindBuffer(t.ARRAY_BUFFER,r.position),t.vertexAttribPointer(t.attribs.vertexPosition,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(t.attribs.vertexPosition),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.indices),r.texture?(t.uniform1i(t.uniforms.useColor,!1),t.bindBuffer(t.ARRAY_BUFFER,r.texture.coords),t.vertexAttribPointer(t.attribs.textureCoord,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(t.attribs.textureCoord),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r.texture),t.uniform1i(t.uniforms.sampler,0)):(t.uniform1i(t.uniforms.useColor,!0),t.disableVertexAttribArray(t.attribs.textureCoord),t.uniform1i(t.uniforms.sampler,null),t.uniform4fv(t.uniforms.vertexColor,r.color)),t.drawElements(r.type,r.size,t.UNSIGNED_SHORT,0)}(r)})}function r(t){return t*Math.PI/180}function n(t){return 180*t/Math.PI}function e(t,e,a,o){var i=e/o,a=r(a),u=r(t[0]),s=r(t[1]),c=Math.sin(s),h=Math.cos(s),l=Math.sin(i),f=Math.cos(i),M=c*f+h*l*Math.cos(a);return s=Math.asin(M),u=r(t[0])+Math.atan2(Math.sin(a)*l*h,f-c*M),[(n(u)+540)%360-180,n(s)]}function a(t,r){var n=(180+t[0])*(Math.PI/180),e=(90-t[1])*(Math.PI/180);return[-r*Math.sin(e)*Math.cos(n),r*Math.cos(e),r*Math.sin(e)*Math.sin(n)]}function o(t){return(t&-t)===t}var i,u="attribute vec4 vertexPosition;         attribute vec2 textureCoord;         uniform mat4 projectionMatrix;         uniform mat4 modelViewMatrix;         varying vec2 coord;         void main(void) {             gl_Position = projectionMatrix * modelViewMatrix * vertexPosition;             coord = textureCoord;         }",s="precision mediump float;         uniform bool useColor;         uniform vec4 vertexColor;         uniform sampler2D sampler;         varying vec2 coord;         void main(void) {             if (useColor) {                 gl_FragColor = vertexColor;             } else {                 vec4 color = texture2D(sampler, vec2(coord.s, coord.t));                 gl_FragColor = vec4(color.rgb, color.a);             }         }",c=TextImage({align:"center",color:"#000000",size:24,stroke:4,strokeColor:"#FFFFFF"}),h={R:1,minZoom:-3,maxZoom:-1.01};window.WebGLPlanet=function(n){for(var e in h)n[e]||(n[e]=h[e]);this.opt=n;var a=document.createElement("canvas");n.dom.appendChild(a),a.style.width="100%",a.style.height="100%",a.style.cursor="grab";var o=this.gl=a.getContext("webgl")||a.getContext("experimental-webgl");if(!o)throw"Unable to initialize WebGL. Your browser may not support it.";!function(t){var r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,u),t.compileShader(r);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,s),t.compileShader(n);var e=t.createProgram();if(t.attachShader(e,r),t.attachShader(e,n),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw"Could not initialise shaders";t.attribs={vertexPosition:t.getAttribLocation(e,"vertexPosition"),textureCoord:t.getAttribLocation(e,"textureCoord")},t.uniforms={projectionMatrix:t.getUniformLocation(e,"projectionMatrix"),modelViewMatrix:t.getUniformLocation(e,"modelViewMatrix"),vertexColor:t.getUniformLocation(e,"vertexColor"),useColor:t.getUniformLocation(e,"useColor"),sampler:t.getUniformLocation(e,"sampler")},t.useProgram(e),t.projectionMatrix=mat4.create(),t.modelViewMatrix=mat4.create(),t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.depthMask(!0),t.enable(t.BLEND),t.depthMask(!0),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}(o),window.addEventListener("resize",this.resizeEvent=this.updateSize.bind(this),!1);var i=function(n){n.preventDefault();var e=n.clientX,a=n.clientY;this.x-=r(this.lastY-a)/10,Math.round(this.x/Math.PI)%2?this.y+=r(this.lastX-e)/10:this.y-=r(this.lastX-e)/10,t.call(this),this.lastX=e,this.lastY=a}.bind(this),c=function(t){t.preventDefault(),this.zoom(Math.floor((this.z-t.deltaY/l)*l)/l)}.bind(this);return a.addEventListener("mousedown",function(t){a.style.cursor="grabbing",this.lastX=t.clientX,this.lastY=t.clientY,a.addEventListener("mousemove",i)}.bind(this),!1),a.addEventListener("mouseup",function(t){a.style.cursor="grab",a.removeEventListener("mousemove",i)},!1),a.addEventListener("mouseover",function(t){a.addEventListener("wheel",c)},!1),a.addEventListener("mouseout",function(t){a.removeEventListener("wheel",c)},!1),this.center(0,0),this.zoom(n.minZoom),this.updateSize(),this.buffers=[],function(){for(var r=this.opt.sphere||Color("#E0FFFF").vec4(),n=this.gl,e=n.createBuffer(),a=[],o=n.createBuffer(),i=[],u=0;u<=30;u++)for(var s=u*Math.PI/30,c=Math.sin(s),h=Math.cos(s),l=0;l<=60;l++){var f=2*l*Math.PI/60,M=Math.sin(f),d=Math.cos(f)*c,v=h,m=M*c;a.push(this.opt.R*d),a.push(this.opt.R*v),a.push(this.opt.R*m)}for(u=0;u<30;u++)for(l=0;l<60;l++){var b=61*u+l,F=b+61;i.push(b),i.push(F),i.push(b+1),i.push(F),i.push(F+1),i.push(b+1)}n.bindBuffer(n.ARRAY_BUFFER,e),n.bufferData(n.ARRAY_BUFFER,new Float32Array(a),n.STATIC_DRAW),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),n.STATIC_DRAW),this.buffers.push({type:n.TRIANGLES,color:r,position:e,indices:o,size:i.length}),t.call(this)}.call(this),this},(i=window.WebGLPlanet.prototype).center=function(e,a){return 2==arguments.length&&(this.x=r(a),this.y=r(-e-90),this.buffers&&t.call(this)),[-n(this.y)-90,n(this.x)]},i.zoom=function(r){return void 0!==r&&(r=Math.min(Math.max(r,this.opt.minZoom),this.opt.maxZoom))!==this.z&&(this.z=r,this.buffers&&t.call(this)),this.z},i.drawGeoJSON=function(t){"FeatureCollection"===t.type?t.features.forEach(function(t){this.drawFeature(t)}.bind(this)):"Feature"===t.type&&this.drawFeature(t)},i.drawFeature=function(t){switch(t.geometry.type){case"Point":setTimeout(function(){this.drawPoint(t.geometry.coordinates[0],Color("black").vec4())}.bind(this),0);break;case"MultiPoint":t.geometry.coordinates.forEach(function(t){setTimeout(function(){this.drawPoint(t[0],Color("black").vec4())}.bind(this),0)}.bind(this));break;case"LineString":setTimeout(function(){this.drawLine(t.geometry.coordinates[0],Color("red").vec4())}.bind(this),0);break;case"MultiLineString":t.geometry.coordinates.forEach(function(t){setTimeout(function(){this.drawLine(t[0],Color("red").vec4())}.bind(this),0)}.bind(this));break;case"Polygon":setTimeout(function(){this.drawPolygon(t.geometry.coordinates[0],Color("green").vec4())}.bind(this),0);break;case"MultiPolygon":t.geometry.coordinates.forEach(function(t){setTimeout(function(){this.drawPolygon(t[0],Color("green").vec4())}.bind(this),0)}.bind(this))}},i.drawText=function(t,r,n){this.gl;var e=c.toImage(t,function(){this.drawImage(e,r,n)}.bind(this))},i.drawImage=function(r,n,i){var u,s,c=this.gl,h=n[2]||this.opt.R+10,l=r.width*i,f=r.height*i,M=c.createTexture(),d=c.createBuffer(),v=c.createBuffer(),m=c.createBuffer(),b=[],F=e(n,l,-90,h),E=e(n,l,90,h),p=e(n,l,90,h),A=e(n,l,-90,h);90===n[1]?(F=e(F,f,-90,h),E=e(E,f,90,h),p=e(p,f,-90,h),A=e(A,f,90,h)):-90===n[1]?(F=e(F,f,90,h),E=e(E,f,-90,h),p=e(p,f,90,h),A=e(A,f,-90,h)):(F=e(F,f,0,h),E=e(E,f,0,h),p=e(p,f,180,h),A=e(A,f,180,h)),b=(b=(b=(b=b.concat(a(F,h))).concat(a(E,h))).concat(a(p,h))).concat(a(A,h)),c.bindBuffer(c.ARRAY_BUFFER,d),c.bufferData(c.ARRAY_BUFFER,new Float32Array(b),c.STATIC_DRAW),u=[0,1,2,0,2,3],c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,m),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(u),c.STATIC_DRAW),s=[0,0,1,0,1,1,0,1],c.bindBuffer(c.ARRAY_BUFFER,v),c.bufferData(c.ARRAY_BUFFER,new Float32Array(s),c.STATIC_DRAW),M.coords=v,c.bindTexture(c.TEXTURE_2D,M),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,r),o(r.width)&&o(r.height)?c.generateMipmap(c.TEXTURE_2D):(c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR)),this.buffers.push({type:c.TRIANGLES,texture:M,position:d,indices:m,size:u.length}),t.call(this)},i.drawPoint=function(r,n){var e=this.gl,o=e.createBuffer(),i=a(r,r[2]||this.opt.R),u=e.createBuffer(),s=[0];e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),this.buffers.push({type:e.POINT,color:n,position:o,indices:u,size:s.length}),t.call(this)},i.drawLine=function(r,n){var e=this.gl,o=e.createBuffer(),i=[],u=e.createBuffer(),s=[],c=r.length-1;r.forEach(function(t,r){i=i.concat(a(t,t[2]||this.opt.R)),s.push(r),r<c&&s.push(r+1)}.bind(this)),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),this.buffers.push({type:e.LINES,color:n,position:o,indices:u,size:s.length}),t.call(this)},i.drawPolygon=function(r,n){var e=this.gl,o=e.createBuffer(),i=[],u=e.createBuffer(),s=[],c=r.length-1;r.forEach(function(t,r){i=i.concat(a(t,t[2]||this.opt.R)),s.push(r),r<c&&s.push(r+1)}.bind(this)),s.push(0),e.bindBuffer(e.ARRAY_BUFFER,o),e.bufferData(e.ARRAY_BUFFER,new Float32Array(i),e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),e.STATIC_DRAW),this.buffers.push({type:e.LINES,color:n,position:o,indices:u,size:s.length}),t.call(this)},i.updateSize=function(){var r=this.gl;r.canvas.width=r.canvas.offsetWidth,r.canvas.height=r.canvas.offsetHeight,r.viewport(0,0,r.canvas.width,r.canvas.height),this.buffers&&t.call(this)},i.destroy=function(){window.removeEventListener("resize",this.resizeEvent,!1)};var l=100}();